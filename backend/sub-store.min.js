/**
 *  ███████╗██╗   ██╗██████╗       ███████╗████████╗ ██████╗ ██████╗ ███████╗
 *  ██╔════╝██║   ██║██╔══██╗      ██╔════╝╚══██╔══╝██╔═══██╗██╔══██╗██╔════╝
 *  ███████╗██║   ██║██████╔╝█████╗███████╗   ██║   ██║   ██║██████╔╝█████╗
 *  ╚════██║██║   ██║██╔══██╗╚════╝╚════██║   ██║   ██║   ██║██╔══██╗██╔══╝
 *  ███████║╚██████╔╝██████╔╝      ███████║   ██║   ╚██████╔╝██║  ██║███████╗
 *  ╚══════╝ ╚═════╝ ╚═════╝       ╚══════╝   ╚═╝    ╚═════╝ ╚═╝  ╚═╝╚══════╝
 * Advanced Subscription Manager for QX, Loon, Surge, Stash and ShadowRocket!
 * @updated: 2022/5/31 03:58:49
 * @version: 1.6
 * @author: Peng-YM
 * @github: https://github.com/Peng-YM/Sub-Store
 * @documentation: https://www.notion.so/Sub-Store-6259586994d34c11a4ced5c406264b46
 */

!function(){var createModuleFactory=function(t){var e;return function(r){return e||t(e={exports:{},parent:r},e.exports),e.exports}},_$buffer_2=createModuleFactory((function(t,e){(function(t){(function(){"use strict";e.Buffer=r,e.SlowBuffer=function(t){return+t!=t&&(t=0),r.alloc(+t)},e.INSPECT_MAX_BYTES=50;function t(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=r.prototype,e}function r(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return a(t)}return n(t,e,r)}function n(e,n,o){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o=0|c(e,n),a=t(o),i=a.write(e,n);return i!==o&&(a=a.slice(0,i)),a}(e,n);if(ArrayBuffer.isView(e))return i(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return(o=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n)).__proto__=r.prototype,o}(e,n,o);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return r.from(a,n,o);var u=function(e){if(r.isBuffer(e)){var n=0|s(e.length),o=t(n);return 0===o.length||e.copy(o,0,0,n),o}return void 0!==e.length?"number"!=typeof e.length||j(e.length)?t(0):i(e):"Buffer"===e.type&&Array.isArray(e.data)?i(e.data):void 0}(e);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return r.from(e[Symbol.toPrimitive]("string"),n,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function a(e){return o(e),t(e<0?0:0|s(e))}function i(e){for(var r=e.length<0?0:0|s(e.length),n=t(r),o=0;o<r;o+=1)n[o]=255&e[o];return n}function s(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function c(t,e){if(r.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||N(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;for(var a=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return k(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(t).length;default:if(a)return o?-1:k(t).length;e=(""+e).toLowerCase(),a=!0}}function u(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e,n,o,a){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),j(n=+n)&&(n=a?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof e&&(e=r.from(e,o)),r.isBuffer(e))return 0===e.length?-1:f(t,e,n,o,a);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):f(t,[e],n,o,a);throw new TypeError("val must be string, number or Buffer")}function f(t,e,r,n,o){var a,i=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;i=2,s/=2,c/=2,r/=2}function u(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o){var p=-1;for(a=r;a<s;a++)if(u(t,a)===u(e,-1===p?0:a-p)){if(-1===p&&(p=a),a-p+1===c)return p*i}else-1!==p&&(a-=a-p),p=-1}else for(r+c>s&&(r=s-c),a=r;a>=0;a--){for(var f=!0,l=0;l<c;l++)if(u(t,a+l)!==u(e,l)){f=!1;break}if(f)return a}return-1}function l(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var a=e.length;n>a/2&&(n=a/2);for(var i=0;i<n;++i){var s=parseInt(e.substr(2*i,2),16);if(j(s))return i;t[r+i]=s}return i}function _(t,e,r,n){return I(k(e,t.length-r),t,r,n)}function h(t,e,r,n){return I(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function d(t,e,r,n){return h(t,e,r,n)}function y(t,e,r,n){return I(P(e),t,r,n)}function v(t,e,r,n){return I(function(t,e){for(var r,n,o,a=[],i=0;i<t.length&&!((e-=2)<0);++i)n=(r=t.charCodeAt(i))>>8,o=r%256,a.push(o),a.push(n);return a}(e,t.length-r),t,r,n)}function m(t,e,r){return 0===e&&r===t.length?_$base64Js_1.fromByteArray(t):_$base64Js_1.fromByteArray(t.slice(e,r))}function g(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var a,i,s,c,u=t[o],p=null,f=u>239?4:u>223?3:u>191?2:1;if(o+f<=r)switch(f){case 1:u<128&&(p=u);break;case 2:128==(192&(a=t[o+1]))&&(c=(31&u)<<6|63&a)>127&&(p=c);break;case 3:a=t[o+1],i=t[o+2],128==(192&a)&&128==(192&i)&&(c=(15&u)<<12|(63&a)<<6|63&i)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:a=t[o+1],i=t[o+2],s=t[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&i)<<6|63&s)>65535&&c<1114112&&(p=c)}null===p?(p=65533,f=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=f}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=w));return r}(n)}e.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(t,e,r){return n(t,e,r)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,r,n){return function(e,r,n){return o(e),e<=0?t(e):void 0!==r?"string"==typeof n?t(e).fill(r,n):t(e).fill(r):t(e)}(e,r,n)},r.allocUnsafe=function(t){return a(t)},r.allocUnsafeSlow=function(t){return a(t)},r.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==r.prototype},r.compare=function(t,e){if(N(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),N(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,o=e.length,a=0,i=Math.min(n,o);a<i;++a)if(t[a]!==e[a]){n=t[a],o=e[a];break}return n<o?-1:o<n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var o=r.allocUnsafe(e),a=0;for(n=0;n<t.length;++n){var i=t[n];if(N(i,Uint8Array)&&(i=r.from(i)),!r.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(o,a),a+=i.length}return o},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)u(this,e,e+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)u(this,e,e+3),u(this,e+1,e+2);return this},r.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)u(this,e,e+7),u(this,e+1,e+6),u(this,e+2,e+5),u(this,e+3,e+4);return this},r.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?g(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,r);case"utf8":case"utf-8":return g(this,e,r);case"ascii":return b(this,e,r);case"latin1":case"binary":return E(this,e,r);case"base64":return m(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r.prototype.compare=function(t,e,n,o,a){if(N(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===a&&(a=this.length),e<0||n>t.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&e>=n)return 0;if(o>=a)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(a>>>=0)-(o>>>=0),s=(n>>>=0)-(e>>>=0),c=Math.min(i,s),u=this.slice(o,a),p=t.slice(e,n),f=0;f<c;++f)if(u[f]!==p[f]){i=u[f],s=p[f];break}return i<s?-1:s<i?1:0},r.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},r.prototype.indexOf=function(t,e,r){return p(this,t,e,r,!0)},r.prototype.lastIndexOf=function(t,e,r){return p(this,t,e,r,!1)},r.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return l(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return h(this,t,e,r);case"latin1":case"binary":return d(this,t,e,r);case"base64":return y(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function b(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function S(t,e,r){var n,o=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>o)&&(r=o);for(var a="",i=e;i<r;++i)a+=(n=t[i])<16?"0"+n.toString(16):n.toString(16);return a}function O(t,e,r){for(var n=t.slice(e,r),o="",a=0;a<n.length;a+=2)o+=String.fromCharCode(n[a]+256*n[a+1]);return o}function A(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,n,o,a,i){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function L(t,e,r,n,o,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function T(t,e,r,n,o){return e=+e,r>>>=0,o||L(t,0,r,4),_$ieee754_3.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,o){return e=+e,r>>>=0,o||L(t,0,r,8),_$ieee754_3.write(t,e,r,n,52,8),r+8}r.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var o=this.subarray(t,e);return o.__proto__=r.prototype,o},r.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],o=1,a=0;++a<e&&(o*=256);)n+=this[t+a]*o;return n},r.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},r.prototype.readUInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return t>>>=0,e||A(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=this[t],o=1,a=0;++a<e&&(o*=256);)n+=this[t+a]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},r.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||A(t,e,this.length);for(var n=e,o=1,a=this[t+--n];n>0&&(o*=256);)a+=this[t+--n]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*e)),a},r.prototype.readInt8=function(t,e){return t>>>=0,e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt16BE=function(t,e){t>>>=0,e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt32LE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return t>>>=0,e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return t>>>=0,e||A(t,4,this.length),_$ieee754_3.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return t>>>=0,e||A(t,4,this.length),_$ieee754_3.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return t>>>=0,e||A(t,8,this.length),_$ieee754_3.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return t>>>=0,e||A(t,8,this.length),_$ieee754_3.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||x(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,a=0;for(this[e]=255&t;++a<r&&(o*=256);)this[e+a]=t/o&255;return e+r},r.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||x(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+r},r.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,1,255,0),this[e]=255&t,e+1},r.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},r.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},r.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},r.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},r.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);x(this,t,e,r,o-1,-o)}var a=0,i=1,s=0;for(this[e]=255&t;++a<r&&(i*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/i>>0)-s&255;return e+r},r.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);x(this,t,e,r,o-1,-o)}var a=r-1,i=1,s=0;for(this[e+a]=255&t;--a>=0&&(i*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/i>>0)-s&255;return e+r},r.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},r.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},r.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},r.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},r.prototype.writeFloatLE=function(t,e,r){return T(this,t,e,!0,r)},r.prototype.writeFloatBE=function(t,e,r){return T(this,t,e,!1,r)},r.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},r.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},r.prototype.copy=function(t,e,n,o){if(!r.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var a=o-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,o);else if(this===t&&n<e&&e<o)for(var i=a-1;i>=0;--i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,o),e);return a},r.prototype.fill=function(t,e,n,o){if("string"==typeof t){if("string"==typeof e?(o=e,e=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!r.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===t.length){var a=t.charCodeAt(0);("utf8"===o&&a<128||"latin1"===o)&&(t=a)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var s=r.isBuffer(t)?t:r.from(t,o),c=s.length;if(0===c)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%c]}return this};var C=/[^+/0-9A-Za-z-_]/g;function k(t,e){var r;e=e||1/0;for(var n=t.length,o=null,a=[],i=0;i<n;++i){if((r=t.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(e-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function P(t){return _$base64Js_1.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function N(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}}).call(this)}).call(this,_$buffer_2({}).Buffer)})),_$constants_42={};Object.defineProperty(_$constants_42,"__esModule",{value:!0}),_$constants_42.SUBS_KEY=_$constants_42.SETTINGS_KEY=_$constants_42.GIST_BACKUP_KEY=_$constants_42.GIST_BACKUP_FILE_NAME=_$constants_42.COLLECTIONS_KEY=_$constants_42.ARTIFACT_REPOSITORY_KEY=_$constants_42.ARTIFACTS_KEY=void 0,_$constants_42.SETTINGS_KEY="settings",_$constants_42.SUBS_KEY="subs",_$constants_42.COLLECTIONS_KEY="collections",_$constants_42.ARTIFACTS_KEY="artifacts",_$constants_42.GIST_BACKUP_KEY="Auto Generated Sub-Store Backup",_$constants_42.GIST_BACKUP_FILE_NAME="Sub-Store",_$constants_42.ARTIFACT_REPOSITORY_KEY="Sub-Store Artifacts Repository";var _$openApi_52={};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach((function(e){_defineProperty(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function asyncGeneratorStep(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){asyncGeneratorStep(a,n,o,i,s,"next",t)}function s(t){asyncGeneratorStep(a,n,o,i,s,"throw",t)}i(void 0)}))}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(_$openApi_52,"__esModule",{value:!0}),_$openApi_52.ENV=ENV,_$openApi_52.HTTP=HTTP,_$openApi_52.OpenAPI=void 0;var isQX="undefined"!=typeof $task,isLoon="undefined"!=typeof $loon,isSurge="undefined"!=typeof $httpClient&&!isLoon,isNode=eval('typeof process !== "undefined"'),OpenAPI=function(){function OpenAPI(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untitled",debug=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,OpenAPI),this.name=name,this.debug=debug,this.http=HTTP(),this.env=ENV(),this.node=function(){if(isNode){var fs=eval("require('fs')");return{fs:fs}}return null}(),this.initCache();var delay=function(t,e){return new Promise((function(r){setTimeout(r.bind(null,e),t)}))},_ref;Promise.prototype.delay=(_ref=_asyncToGenerator(_regeneratorRuntime().mark((function t(e){var r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this;case 2:return r=t.sent,t.next=5,delay(e,r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return _ref.apply(this,arguments)})}return _createClass(OpenAPI,[{key:"initCache",value:function(){if(isQX&&(this.cache=JSON.parse($prefs.valueForKey(this.name)||"{}")),(isLoon||isSurge)&&(this.cache=JSON.parse($persistentStore.read(this.name)||"{}")),isNode){var t="root.json";this.node.fs.existsSync(t)||this.node.fs.writeFileSync(t,JSON.stringify({}),{flag:"wx"},(function(t){return console.log(t)})),this.root={},t="".concat(this.name,".json"),this.node.fs.existsSync(t)?this.cache=JSON.parse(this.node.fs.readFileSync("".concat(this.name,".json"))):(this.node.fs.writeFileSync(t,JSON.stringify({}),{flag:"wx"},(function(t){return console.log(t)})),this.cache={})}}},{key:"persistCache",value:function(){var t=JSON.stringify(this.cache,null,2);isQX&&$prefs.setValueForKey(t,this.name),(isLoon||isSurge)&&$persistentStore.write(t,this.name),isNode&&(this.node.fs.writeFileSync("".concat(this.name,".json"),t,{flag:"w"},(function(t){return console.log(t)})),this.node.fs.writeFileSync("root.json",JSON.stringify(this.root,null,2),{flag:"w"},(function(t){return console.log(t)})))}},{key:"write",value:function(t,e){if(this.log("SET ".concat(e)),-1!==e.indexOf("#")){if(e=e.substr(1),isSurge||isLoon)return $persistentStore.write(t,e);if(isQX)return $prefs.setValueForKey(t,e);isNode&&(this.root[e]=t)}else this.cache[e]=t;this.persistCache()}},{key:"read",value:function(t){return this.log("READ ".concat(t)),-1===t.indexOf("#")?this.cache[t]:(t=t.substr(1),isSurge||isLoon?$persistentStore.read(t):isQX?$prefs.valueForKey(t):isNode?this.root[t]:void 0)}},{key:"delete",value:function(t){if(this.log("DELETE ".concat(t)),-1!==t.indexOf("#")){if(t=t.substr(1),isSurge||isLoon)return $persistentStore.write(null,t);if(isQX)return $prefs.removeValueForKey(t);isNode&&delete this.root[t]}else delete this.cache[t];this.persistCache()}},{key:"notify",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n["open-url"],a=n["media-url"];if(isQX&&$notify(t,e,r,n),isSurge&&$notification.post(t,e,r+"".concat(a?"\n\u591a\u5a92\u4f53:"+a:""),{url:o}),isLoon){var i={};o&&(i.openUrl=o),a&&(i.mediaUrl=a),"{}"===JSON.stringify(i)?$notification.post(t,e,r):$notification.post(t,e,r,i)}if(isNode){var s=r+(o?"\n\u70b9\u51fb\u8df3\u8f6c: ".concat(o):"")+(a?"\n\u591a\u5a92\u4f53: ".concat(a):"");console.log("".concat(t,"\n").concat(e,"\n").concat(s,"\n\n"))}}},{key:"log",value:function(t){this.debug&&console.log("[".concat(this.name,"] LOG: ").concat(t))}},{key:"info",value:function(t){console.log("[".concat(this.name,"] INFO: ").concat(t))}},{key:"error",value:function(t){console.log("[".concat(this.name,"] ERROR: ").concat(t))}},{key:"wait",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}},{key:"done",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};isQX||isLoon||isSurge?$done(t):isNode&&"undefined"!=typeof $context&&($context.headers=t.headers,$context.statusCode=t.statusCode,$context.body=t.body)}}]),OpenAPI}();function ENV(){return{isQX:isQX,isLoon:isLoon,isSurge:isSurge,isNode:isNode}}function HTTP(){var defaultOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseURL:""},_ENV=ENV(),isQX=_ENV.isQX,isLoon=_ENV.isLoon,isSurge=_ENV.isSurge,isNode=_ENV.isNode,methods=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH"],URL_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function send(method,options){options="string"==typeof options?{url:options}:options;var baseURL=defaultOptions.baseURL;baseURL&&!URL_REGEX.test(options.url||"")&&(options.url=baseURL?baseURL+options.url:options.url),options=_objectSpread(_objectSpread({},defaultOptions),options);var timeout=options.timeout,events=_objectSpread(_objectSpread({},{onRequest:function(){},onResponse:function(t){return t},onTimeout:function(){}}),options.events),worker,timeoutid;events.onRequest(method,options),isQX?worker=$task.fetch({method:method,url:options.url,headers:options.headers,body:options.body}):(isLoon||isSurge||isNode)&&(worker=new Promise((function(resolve,reject){var request=isNode?eval("require('request')"):$httpClient;request[method.toLowerCase()](options,(function(t,e,r){t?reject(t):resolve({statusCode:e.status||e.statusCode,headers:e.headers,body:r})}))})));var timer=timeout?new Promise((function(t,e){timeoutid=setTimeout((function(){return events.onTimeout(),e("".concat(method," URL: ").concat(options.url," exceeds the timeout ").concat(timeout," ms"))}),timeout)})):null;return(timer?Promise.race([timer,worker]).then((function(t){return clearTimeout(timeoutid),t})):worker).then((function(t){return events.onResponse(t)}))}var http={};return methods.forEach((function(t){return http[t.toLowerCase()]=function(e){return send(t,e)}})),http}_$openApi_52.OpenAPI=OpenAPI;var _$express_51={};function ___classCallCheck_51(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ___defineProperties_51(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ___createClass_51(t,e,r){return e&&___defineProperties_51(t.prototype,e),r&&___defineProperties_51(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function express(_ref){var $=_ref.substore,port=_ref.port,host=_ref.host,_ENV=(0,_$openApi_52.ENV)(),isNode=_ENV.isNode,DEFAULT_HEADERS={"Content-Type":"text/plain;charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,GET,OPTIONS,PATCH,PUT,DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"};if(isNode){var express_=eval('require("express")'),bodyParser=eval('require("body-parser")'),_app=express_();return _app.use(bodyParser.json({verify:rawBodySaver})),_app.use(bodyParser.urlencoded({verify:rawBodySaver,extended:!0})),_app.use(bodyParser.raw({verify:rawBodySaver,type:"*/*"})),_app.use((function(t,e,r){e.set(DEFAULT_HEADERS),r()})),_app.start=function(){var t=_app.listen(port||3e3,host||"0.0.0.0",(function(){var e=t.address(),r=e.address,n=e.port;$.info("Express started on: ".concat(r,":").concat(n))}))},_app}var handlers=[],METHODS_NAMES=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD'","ALL"],dispatch=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.method,o=e.url,a=e.headers,i=e.body;/json/i.test(a["Content-Type"])&&(i=JSON.parse(i)),n=n.toUpperCase();var s,c=extractURL(o),u=c.path,p=c.query,f=null,l=0;for(s=r;s<handlers.length;s++)if("ALL"===handlers[s].method||n===handlers[s].method){var _=handlers[s].pattern;patternMatched(_,u)&&_.split("/").length>l&&(f=handlers[s],l=_.split("/").length)}if(f){var h=function(){t(n,o,s)},d={method:n,url:o,path:u,query:p,params:extractPathParams(f.pattern,u),headers:a,body:i},y=Response(),v=f.callback,m=function(t){y.status(500).json({status:"failed",message:"Internal Server Error: ".concat(t)})};if("AsyncFunction"===v.constructor.name)v(d,y,h).catch(m);else try{v(d,y,h)}catch(g){m(g)}}else Response().status(404).json({status:"failed",message:"ERROR: 404 not found"})},app={};return METHODS_NAMES.forEach((function(t){app[t.toLowerCase()]=function(e,r){handlers.push({method:t,pattern:e,callback:r})}})),app.route=function(t){var e={};return METHODS_NAMES.forEach((function(r){e[r.toLowerCase()]=function(n){return handlers.push({method:r,pattern:t,callback:n}),e}})),e},app.start=function(){dispatch($request)},app;function rawBodySaver(t,e,r,n){r&&r.length&&(t.rawBody=r.toString(n||"utf8"))}function Response(){var t=200,e=(0,_$openApi_52.ENV)(),r=e.isQX,n=e.isLoon,o=e.isSurge,a=DEFAULT_HEADERS,i={200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",302:"HTTP/1.1 302 Found",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",404:"HTTP/1.1 404 Not Found",500:"HTTP/1.1 500 Internal Server Error"};return new(function(){function e(){___classCallCheck_51(this,e)}return ___createClass_51(e,[{key:"status",value:function(e){return t=e,this}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s={status:r?i[t]:t,body:e,headers:a};r?$done(s):(n||o)&&$done({response:s})}},{key:"end",value:function(){this.send()}},{key:"html",value:function(t){this.set("Content-Type","text/html;charset=UTF-8"),this.send(t)}},{key:"json",value:function(t){this.set("Content-Type","application/json;charset=UTF-8"),this.send(JSON.stringify(t))}},{key:"set",value:function(t,e){return a[t]=e,this}}]),e}())}}function patternMatched(t,e){if(t instanceof RegExp&&t.test(e))return!0;if("/"===t)return!0;if(-1===t.indexOf(":")){for(var r=e.split("/"),n=t.split("/"),o=0;o<n.length;o++)if(r[o]!==n[o])return!1;return!0}return!!extractPathParams(t,e)}function extractURL(t){var e=(t.match(/https?:\/\/[^/]+(\/[^?]*)/)||[])[1]||"/",r={};if(-1!==t.indexOf("?"))for(var n=t.slice(t.indexOf("?")+1).split("&"),o=0;o<n.length;o++){var a=n[o].split("=");r[a[0]]=a[1]}return{path:e,query:r}}function extractPathParams(t,e){if(-1===t.indexOf(":"))return null;for(var r={},n=0,o=0;n<t.length;n++,o++)if(":"===t[n]){for(var a=[],i=[];"/"!==t[++n]&&n<t.length;)a.push(t[n]);for(;"/"!==e[o]&&o<e.length;)i.push(e[o++]);r[a.join("")]=i.join("")}else if(t[n]!==e[o])return null;return r}Object.defineProperty(_$express_51,"__esModule",{value:!0}),_$express_51.default=express;var _$ipApi_49={};function ___typeof_49(t){return(___typeof_49="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ___regeneratorRuntime_49(){___regeneratorRuntime_49=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_49(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __asyncGeneratorStep_49(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function _IP_API(){var t;return t=___regeneratorRuntime_49().mark((function t(e,r){var n,o,a;return ___regeneratorRuntime_49().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=decodeURIComponent(e.params.server),o=(0,_$openApi_52.HTTP)(),t.next=4,o.get("http://ip-api.com/json/".concat(n,"?lang=zh-CN")).then((function(t){return JSON.parse(t.body)}));case 4:a=t.sent,r.json(a);case 6:case"end":return t.stop()}}),t)})),(_IP_API=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_49(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_49(a,n,o,i,s,"throw",t)}i(void 0)}))}).apply(this,arguments)}Object.defineProperty(_$ipApi_49,"__esModule",{value:!0}),_$ipApi_49.default=function(t,e){return _IP_API.apply(this,arguments)};var _$gist_48={};function ___typeof_48(t){return(___typeof_48="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ___regeneratorRuntime_48(){___regeneratorRuntime_48=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_48(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function __asyncGeneratorStep_48(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function ___asyncToGenerator_48(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_48(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_48(a,n,o,i,s,"throw",t)}i(void 0)}))}}function ___defineProperties_48(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(_$gist_48,"__esModule",{value:!0}),_$gist_48.default=void 0;var Gist=function(){function t(e){var r=e.token,n=e.key;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.http=(0,_$openApi_52.HTTP)({baseURL:"https://api.github.com",headers:{Authorization:"token ".concat(r),"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},events:{onResponse:function(t){return/^[45]/.test(String(t.statusCode))?Promise.reject("ERROR: ".concat(JSON.parse(t.body).message)):t}}}),this.key=n}var e,r,n,o;return e=t,(r=[{key:"locate",value:(o=___asyncToGenerator_48(___regeneratorRuntime_48().mark((function t(){var e=this;return ___regeneratorRuntime_48().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.http.get("/gists").then((function(t){var r,n=_createForOfIteratorHelper(JSON.parse(t.body));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.description===e.key)return o.id}}catch(a){n.e(a)}finally{n.f()}return-1})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"upload",value:(n=___asyncToGenerator_48(___regeneratorRuntime_48().mark((function t(e){var r;return ___regeneratorRuntime_48().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.locate();case 2:if(-1!==(r=t.sent)){t.next=7;break}return t.abrupt("return",this.http.post({url:"/gists",body:JSON.stringify({description:this.key,public:!1,files:e})}));case 7:return t.abrupt("return",this.http.patch({url:"/gists/".concat(r),body:JSON.stringify({files:e})}));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"download",value:function(){var t=___asyncToGenerator_48(___regeneratorRuntime_48().mark((function t(e){var r,n,o,a;return ___regeneratorRuntime_48().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.locate();case 2:if(-1!==(r=t.sent)){t.next=7;break}return t.abrupt("return",Promise.reject("\u672a\u627e\u5230Gist\u5907\u4efd\uff01"));case 7:return t.prev=7,t.next=10,this.http.get("/gists/".concat(r)).then((function(t){return JSON.parse(t.body)}));case 10:return n=t.sent,o=n.files,a=o[e].raw_url,t.next=15,this.http.get(a).then((function(t){return t.body}));case 15:return t.abrupt("return",t.sent);case 18:return t.prev=18,t.t0=t.catch(7),t.abrupt("return",Promise.reject(t.t0));case 21:case"end":return t.stop()}}),t,this,[[7,18]])})));return function(e){return t.apply(this,arguments)}}()}])&&___defineProperties_48(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();_$gist_48.default=Gist;var _$app_36={};Object.defineProperty(_$app_36,"__esModule",{value:!0}),_$app_36.default=void 0;var _default=new _$openApi_52.OpenAPI("sub-store");_$app_36.default=_default;var _$common_7={};function isNothing(t){return null==t}_$common_7.isNothing=isNothing,_$common_7.isObject=function(t){return"object"==typeof t&&null!==t},_$common_7.toArray=function(t){return Array.isArray(t)?t:isNothing(t)?[]:[t]},_$common_7.repeat=function(t,e){var r,n="";for(r=0;r<e;r+=1)n+=t;return n},_$common_7.isNegativeZero=function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},_$common_7.extend=function(t,e){var r,n,o,a;if(e)for(r=0,n=(a=Object.keys(e)).length;r<n;r+=1)t[o=a[r]]=e[o];return t};var _$exception_9={};function YAMLException(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}YAMLException.prototype=Object.create(Error.prototype),YAMLException.prototype.constructor=YAMLException,YAMLException.prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e},_$exception_9=YAMLException;var _$mark_11={};function Mark(t,e,r,n,o){this.name=t,this.buffer=e,this.position=r,this.line=n,this.column=o}Mark.prototype.getSnippet=function(t,e){var r,n,o,a,i;if(!this.buffer)return null;for(t=t||4,e=e||75,r="",n=this.position;n>0&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(n-1));)if(n-=1,this.position-n>e/2-1){r=" ... ",n+=5;break}for(o="",a=this.position;a<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>e/2-1){o=" ... ",a-=5;break}return i=this.buffer.slice(n,a),_$common_7.repeat(" ",t)+r+i+o+"\n"+_$common_7.repeat(" ",t+this.position-n+r.length)+"^"},Mark.prototype.toString=function(t){var e,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(r+=":\n"+e),r},_$mark_11=Mark;var TYPE_CONSTRUCTOR_OPTIONS=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"],_$type_18=function(t,e){var r,n;if(e=e||{},Object.keys(e).forEach((function(e){if(-1===TYPE_CONSTRUCTOR_OPTIONS.indexOf(e))throw new _$exception_9('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=(r=e.styleAliases||null,n={},null!==r&&Object.keys(r).forEach((function(t){r[t].forEach((function(e){n[String(e)]=t}))})),n),-1===YAML_NODE_KINDS.indexOf(this.kind))throw new _$exception_9('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')},_$schema_12={};function compileList(t,e,r){var n=[];return t.include.forEach((function(t){r=compileList(t,e,r)})),t[e].forEach((function(t){r.forEach((function(e,r){e.tag===t.tag&&e.kind===t.kind&&n.push(r)})),r.push(t)})),r.filter((function(t,e){return-1===n.indexOf(e)}))}function Schema(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach((function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new _$exception_9("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=compileList(this,"implicit",[]),this.compiledExplicit=compileList(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(t){r[t.kind][t.tag]=r.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}Schema.DEFAULT=null,Schema.create=function(){var t,e;switch(arguments.length){case 1:t=Schema.DEFAULT,e=arguments[0];break;case 2:t=arguments[0],e=arguments[1];break;default:throw new _$exception_9("Wrong number of arguments for Schema.create function")}if(t=_$common_7.toArray(t),e=_$common_7.toArray(e),!t.every((function(t){return t instanceof Schema})))throw new _$exception_9("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!e.every((function(t){return t instanceof _$type_18})))throw new _$exception_9("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Schema({include:t,explicit:e})},_$schema_12=Schema;var _$str_33=new _$type_18("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),_$seq_31=new _$type_18("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),_$map_26=new _$type_18("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),_$failsafe_16=new _$schema_12({explicit:[_$str_33,_$seq_31,_$map_26]}),_$null_28=new _$type_18("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),_$bool_20=new _$type_18("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function isOctCode(t){return 48<=t&&t<=55}function isDecCode(t){return 48<=t&&t<=57}var _$int_22=new _$type_18("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,r,n=t.length,o=0,a=!1;if(!n)return!1;if("-"!==(e=t[o])&&"+"!==e||(e=t[++o]),"0"===e){if(o+1===n)return!0;if("b"===(e=t[++o])){for(o++;o<n;o++)if("_"!==(e=t[o])){if("0"!==e&&"1"!==e)return!1;a=!0}return a&&"_"!==e}if("x"===e){for(o++;o<n;o++)if("_"!==(e=t[o])){if(!(48<=(r=t.charCodeAt(o))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;a=!0}return a&&"_"!==e}for(;o<n;o++)if("_"!==(e=t[o])){if(!isOctCode(t.charCodeAt(o)))return!1;a=!0}return a&&"_"!==e}if("_"===e)return!1;for(;o<n;o++)if("_"!==(e=t[o])){if(":"===e)break;if(!isDecCode(t.charCodeAt(o)))return!1;a=!0}return!(!a||"_"===e)&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(o)))},construct:function(t){var e,r,n=t,o=1,a=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(e=n[0])&&"+"!==e||("-"===e&&(o=-1),e=(n=n.slice(1))[0]),"0"===n?0:"0"===e?"b"===n[1]?o*parseInt(n.slice(2),2):"x"===n[1]?o*parseInt(n,16):o*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(t){a.unshift(parseInt(t,10))})),n=0,r=1,a.forEach((function(t){n+=t*r,r*=60})),o*n):o*parseInt(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!_$common_7.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0"+t.toString(8):"-0"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/,_$float_21=new _$type_18("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!YAML_FLOAT_PATTERN.test(t)||"_"===t[t.length-1])},construct:function(t){var e,r,n,o;return r="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:e.indexOf(":")>=0?(e.split(":").forEach((function(t){o.unshift(parseFloat(t,10))})),e=0,n=1,o.forEach((function(t){e+=t*n,n*=60})),r*e):r*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||_$common_7.isNegativeZero(t))},represent:function(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(_$common_7.isNegativeZero(t))return"-0.0";return r=t.toString(10),SCIENTIFIC_WITHOUT_DOT.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"}),_$json_17=new _$schema_12({include:[_$failsafe_16],implicit:[_$null_28,_$bool_20,_$int_22,_$float_21]}),_$core_13=new _$schema_12({include:[_$json_17]}),YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),_$timestamp_34=new _$type_18("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==YAML_DATE_REGEXP.exec(t)||null!==YAML_TIMESTAMP_REGEXP.exec(t))},construct:function(t){var e,r,n,o,a,i,s,c,u=0,p=null;if(null===(e=YAML_DATE_REGEXP.exec(t))&&(e=YAML_TIMESTAMP_REGEXP.exec(t)),null===e)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(r,n,o));if(a=+e[4],i=+e[5],s=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(p=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(p=-p)),c=new Date(Date.UTC(r,n,o,a,i,s,u)),p&&c.setTime(c.getTime()-p),c},instanceOf:Date,represent:function(t){return t.toISOString()}}),_$merge_27=new _$type_18("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),NodeBuffer;try{var _require=require;NodeBuffer=_require("buffer").Buffer}catch(__){}var BASE64_MAP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",_$binary_19=new _$type_18("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,r,n=0,o=t.length,a=BASE64_MAP;for(r=0;r<o;r++)if(!((e=a.indexOf(t.charAt(r)))>64)){if(e<0)return!1;n+=6}return n%8==0},construct:function(t){var e,r,n=t.replace(/[\r\n=]/g,""),o=n.length,a=BASE64_MAP,i=0,s=[];for(e=0;e<o;e++)e%4==0&&e&&(s.push(i>>16&255),s.push(i>>8&255),s.push(255&i)),i=i<<6|a.indexOf(n.charAt(e));return 0==(r=o%4*6)?(s.push(i>>16&255),s.push(i>>8&255),s.push(255&i)):18===r?(s.push(i>>10&255),s.push(i>>2&255)):12===r&&s.push(i>>4&255),NodeBuffer?NodeBuffer.from?NodeBuffer.from(s):new NodeBuffer(s):s},predicate:function(t){return NodeBuffer&&NodeBuffer.isBuffer(t)},represent:function(t){var e,r,n="",o=0,a=t.length,i=BASE64_MAP;for(e=0;e<a;e++)e%3==0&&e&&(n+=i[o>>18&63],n+=i[o>>12&63],n+=i[o>>6&63],n+=i[63&o]),o=(o<<8)+t[e];return 0==(r=a%3)?(n+=i[o>>18&63],n+=i[o>>12&63],n+=i[o>>6&63],n+=i[63&o]):2===r?(n+=i[o>>10&63],n+=i[o>>4&63],n+=i[o<<2&63],n+=i[64]):1===r&&(n+=i[o>>2&63],n+=i[o<<4&63],n+=i[64],n+=i[64]),n}}),_hasOwnProperty=Object.prototype.hasOwnProperty,_toString=Object.prototype.toString,_$omap_29=new _$type_18("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,r,n,o,a,i=[],s=t;for(e=0,r=s.length;e<r;e+=1){if(n=s[e],a=!1,"[object Object]"!==_toString.call(n))return!1;for(o in n)if(_hasOwnProperty.call(n,o)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==i.indexOf(o))return!1;i.push(o)}return!0},construct:function(t){return null!==t?t:[]}}),___toString_30=Object.prototype.toString,_$pairs_30=new _$type_18("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,r,n,o,a,i=t;for(a=new Array(i.length),e=0,r=i.length;e<r;e+=1){if(n=i[e],"[object Object]"!==___toString_30.call(n))return!1;if(1!==(o=Object.keys(n)).length)return!1;a[e]=[o[0],n[o[0]]]}return!0},construct:function(t){if(null===t)return[];var e,r,n,o,a,i=t;for(a=new Array(i.length),e=0,r=i.length;e<r;e+=1)n=i[e],o=Object.keys(n),a[e]=[o[0],n[o[0]]];return a}}),___hasOwnProperty_32=Object.prototype.hasOwnProperty,_$set_32=new _$type_18("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,r=t;for(e in r)if(___hasOwnProperty_32.call(r,e)&&null!==r[e])return!1;return!0},construct:function(t){return null!==t?t:{}}}),_$default_safe_15=new _$schema_12({include:[_$core_13],implicit:[_$timestamp_34,_$merge_27],explicit:[_$binary_19,_$omap_29,_$pairs_30,_$set_32]}),_$undefined_25=new _$type_18("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}}),_$regexp_24=new _$type_18("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,r=/\/([gim]*)$/.exec(t),n="";if("/"===e[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==e[e.length-n.length-1])return!1}return!0},construct:function(t){var e=t,r=/\/([gim]*)$/.exec(t),n="";return"/"===e[0]&&(r&&(n=r[1]),e=e.slice(1,e.length-n.length-1)),new RegExp(e,n)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}}),esprima;try{var ___require_23=require;esprima=___require_23("esprima")}catch(_){"undefined"!=typeof window&&(esprima=window.esprima)}var _$function_23=new _$type_18("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",r=esprima.parse(e,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&("ArrowFunctionExpression"===r.body[0].expression.type||"FunctionExpression"===r.body[0].expression.type)}catch(n){return!1}},construct:function(t){var e,r="("+t+")",n=esprima.parse(r,{range:!0}),o=[];if("Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"ArrowFunctionExpression"!==n.body[0].expression.type&&"FunctionExpression"!==n.body[0].expression.type)throw new Error("Failed to resolve function");return n.body[0].expression.params.forEach((function(t){o.push(t.name)})),e=n.body[0].expression.body.range,"BlockStatement"===n.body[0].expression.body.type?new Function(o,r.slice(e[0]+1,e[1]-1)):new Function(o,"return "+r.slice(e[0],e[1]))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),_$default_full_14=_$schema_12.DEFAULT=new _$schema_12({include:[_$default_safe_15],explicit:[_$undefined_25,_$regexp_24,_$function_23]}),_$loader_10={},___hasOwnProperty_10=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(t){return Object.prototype.toString.call(t)}function is_EOL(t){return 10===t||13===t}function is_WHITE_SPACE(t){return 9===t||32===t}function is_WS_OR_EOL(t){return 9===t||32===t||10===t||13===t}function is_FLOW_INDICATOR(t){return 44===t||91===t||93===t||123===t||125===t}function fromHexCode(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function simpleEscapeSequence(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}function charFromCodepoint(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||_$default_full_14,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function generateError(t,e){return new _$exception_9(e,new _$mark_11(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function throwError(t,e){throw generateError(t,e)}function throwWarning(t,e){t.onWarning&&t.onWarning.call(null,generateError(t,e))}var directiveHandlers={YAML:function(t,e,r){var n,o,a;null!==t.version&&throwError(t,"duplication of %YAML directive"),1!==r.length&&throwError(t,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&throwError(t,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),a=parseInt(n[2],10),1!==o&&throwError(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=a<2,1!==a&&2!==a&&throwWarning(t,"unsupported YAML version of the document")},TAG:function(t,e,r){var n,o;2!==r.length&&throwError(t,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],PATTERN_TAG_HANDLE.test(n)||throwError(t,"ill-formed tag handle (first argument) of the TAG directive"),___hasOwnProperty_10.call(t.tagMap,n)&&throwError(t,'there is a previously declared suffix for "'+n+'" tag handle'),PATTERN_TAG_URI.test(o)||throwError(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[n]=o}};function captureSegment(t,e,r,n){var o,a,i,s;if(e<r){if(s=t.input.slice(e,r),n)for(o=0,a=s.length;o<a;o+=1)9===(i=s.charCodeAt(o))||32<=i&&i<=1114111||throwError(t,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(s)&&throwError(t,"the stream contains non-printable characters");t.result+=s}}function mergeMappings(t,e,r,n){var o,a,i,s;for(_$common_7.isObject(r)||throwError(t,"cannot merge mappings; the provided source object is unacceptable"),i=0,s=(o=Object.keys(r)).length;i<s;i+=1)a=o[i],___hasOwnProperty_10.call(e,a)||(e[a]=r[a],n[a]=!0)}function storeMappingPair(t,e,r,n,o,a,i,s){var c,u;if(Array.isArray(o))for(c=0,u=(o=Array.prototype.slice.call(o)).length;c<u;c+=1)Array.isArray(o[c])&&throwError(t,"nested arrays are not supported inside keys"),"object"==typeof o&&"[object Object]"===_class(o[c])&&(o[c]="[object Object]");if("object"==typeof o&&"[object Object]"===_class(o)&&(o="[object Object]"),o=String(o),null===e&&(e={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(a))for(c=0,u=a.length;c<u;c+=1)mergeMappings(t,e,a[c],r);else mergeMappings(t,e,a,r);else t.json||___hasOwnProperty_10.call(r,o)||!___hasOwnProperty_10.call(e,o)||(t.line=i||t.line,t.position=s||t.position,throwError(t,"duplicated mapping key")),e[o]=a,delete r[o];return e}function readLineBreak(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):throwError(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function skipSeparationSpace(t,e,r){for(var n=0,o=t.input.charCodeAt(t.position);0!==o;){for(;is_WHITE_SPACE(o);)o=t.input.charCodeAt(++t.position);if(e&&35===o)do{o=t.input.charCodeAt(++t.position)}while(10!==o&&13!==o&&0!==o);if(!is_EOL(o))break;for(readLineBreak(t),o=t.input.charCodeAt(t.position),n++,t.lineIndent=0;32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position)}return-1!==r&&0!==n&&t.lineIndent<r&&throwWarning(t,"deficient indentation"),n}function testDocumentSeparator(t){var e,r=t.position;return!(45!==(e=t.input.charCodeAt(r))&&46!==e||e!==t.input.charCodeAt(r+1)||e!==t.input.charCodeAt(r+2)||(r+=3,0!==(e=t.input.charCodeAt(r))&&!is_WS_OR_EOL(e)))}function writeFoldedLines(t,e){1===e?t.result+=" ":e>1&&(t.result+=_$common_7.repeat("\n",e-1))}function readBlockSequence(t,e){var r,n,o=t.tag,a=t.anchor,i=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=i),n=t.input.charCodeAt(t.position);0!==n&&45===n&&is_WS_OR_EOL(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,skipSeparationSpace(t,!0,-1)&&t.lineIndent<=e)i.push(null),n=t.input.charCodeAt(t.position);else if(r=t.line,composeNode(t,e,CONTEXT_BLOCK_IN,!1,!0),i.push(t.result),skipSeparationSpace(t,!0,-1),n=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&0!==n)throwError(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=o,t.anchor=a,t.kind="sequence",t.result=i,!0)}function readTagProperty(t){var e,r,n,o,a=!1,i=!1;if(33!==(o=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&throwError(t,"duplication of a tag property"),60===(o=t.input.charCodeAt(++t.position))?(a=!0,o=t.input.charCodeAt(++t.position)):33===o?(i=!0,r="!!",o=t.input.charCodeAt(++t.position)):r="!",e=t.position,a){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&62!==o);t.position<t.length?(n=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):throwError(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!is_WS_OR_EOL(o);)33===o&&(i?throwError(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),PATTERN_TAG_HANDLE.test(r)||throwError(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),PATTERN_FLOW_INDICATORS.test(n)&&throwError(t,"tag suffix cannot contain flow indicator characters")}return n&&!PATTERN_TAG_URI.test(n)&&throwError(t,"tag name cannot contain such characters: "+n),a?t.tag=n:___hasOwnProperty_10.call(t.tagMap,r)?t.tag=t.tagMap[r]+n:"!"===r?t.tag="!"+n:"!!"===r?t.tag="tag:yaml.org,2002:"+n:throwError(t,'undeclared tag handle "'+r+'"'),!0}function readAnchorProperty(t){var e,r;if(38!==(r=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&throwError(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!is_WS_OR_EOL(r)&&!is_FLOW_INDICATOR(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&throwError(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function composeNode(t,e,r,n,o){var a,i,s,c,u,p,f,l,_=1,h=!1,d=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=i=s=CONTEXT_BLOCK_OUT===r||CONTEXT_BLOCK_IN===r,n&&skipSeparationSpace(t,!0,-1)&&(h=!0,t.lineIndent>e?_=1:t.lineIndent===e?_=0:t.lineIndent<e&&(_=-1)),1===_)for(;readTagProperty(t)||readAnchorProperty(t);)skipSeparationSpace(t,!0,-1)?(h=!0,s=a,t.lineIndent>e?_=1:t.lineIndent===e?_=0:t.lineIndent<e&&(_=-1)):s=!1;if(s&&(s=h||o),1!==_&&CONTEXT_BLOCK_OUT!==r||(f=CONTEXT_FLOW_IN===r||CONTEXT_FLOW_OUT===r?e:e+1,l=t.position-t.lineStart,1===_?s&&(readBlockSequence(t,l)||function(t,e,r){var n,o,a,i,s,c=t.tag,u=t.anchor,p={},f={},l=null,_=null,h=null,d=!1,y=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=p),s=t.input.charCodeAt(t.position);0!==s;){if(n=t.input.charCodeAt(t.position+1),a=t.line,i=t.position,63!==s&&58!==s||!is_WS_OR_EOL(n)){if(!composeNode(t,r,CONTEXT_FLOW_OUT,!1,!0))break;if(t.line===a){for(s=t.input.charCodeAt(t.position);is_WHITE_SPACE(s);)s=t.input.charCodeAt(++t.position);if(58===s)is_WS_OR_EOL(s=t.input.charCodeAt(++t.position))||throwError(t,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(storeMappingPair(t,p,f,l,_,null),l=_=h=null),y=!0,d=!1,o=!1,l=t.tag,_=t.result;else{if(!y)return t.tag=c,t.anchor=u,!0;throwError(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return t.tag=c,t.anchor=u,!0;throwError(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(d&&(storeMappingPair(t,p,f,l,_,null),l=_=h=null),y=!0,d=!0,o=!0):d?(d=!1,o=!0):throwError(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,s=n;if((t.line===a||t.lineIndent>e)&&(composeNode(t,e,CONTEXT_BLOCK_OUT,!0,o)&&(d?_=t.result:h=t.result),d||(storeMappingPair(t,p,f,l,_,h,a,i),l=_=h=null),skipSeparationSpace(t,!0,-1),s=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==s)throwError(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return d&&storeMappingPair(t,p,f,l,_,null),y&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=p),y}(t,l,f))||function(t,e){var r,n,o,a,i,s,c,u,p,f,l=!0,_=t.tag,h=t.anchor,d={};if(91===(f=t.input.charCodeAt(t.position)))o=93,s=!1,n=[];else{if(123!==f)return!1;o=125,s=!0,n={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=n),f=t.input.charCodeAt(++t.position);0!==f;){if(skipSeparationSpace(t,!0,e),(f=t.input.charCodeAt(t.position))===o)return t.position++,t.tag=_,t.anchor=h,t.kind=s?"mapping":"sequence",t.result=n,!0;l||throwError(t,"missed comma between flow collection entries"),p=null,a=i=!1,63===f&&is_WS_OR_EOL(t.input.charCodeAt(t.position+1))&&(a=i=!0,t.position++,skipSeparationSpace(t,!0,e)),r=t.line,composeNode(t,e,CONTEXT_FLOW_IN,!1,!0),u=t.tag,c=t.result,skipSeparationSpace(t,!0,e),f=t.input.charCodeAt(t.position),!i&&t.line!==r||58!==f||(a=!0,f=t.input.charCodeAt(++t.position),skipSeparationSpace(t,!0,e),composeNode(t,e,CONTEXT_FLOW_IN,!1,!0),p=t.result),s?storeMappingPair(t,n,d,u,c,p):a?n.push(storeMappingPair(t,null,d,u,c,p)):n.push(c),skipSeparationSpace(t,!0,e),44===(f=t.input.charCodeAt(t.position))?(l=!0,f=t.input.charCodeAt(++t.position)):l=!1}throwError(t,"unexpected end of the stream within a flow collection")}(t,f)?d=!0:(i&&function(t,e){var r,n,o,a,i,s=CHOMPING_CLIP,c=!1,u=!1,p=e,f=0,l=!1;if(124===(a=t.input.charCodeAt(t.position)))n=!1;else{if(62!==a)return!1;n=!0}for(t.kind="scalar",t.result="";0!==a;)if(43===(a=t.input.charCodeAt(++t.position))||45===a)CHOMPING_CLIP===s?s=43===a?CHOMPING_KEEP:CHOMPING_STRIP:throwError(t,"repeat of a chomping mode identifier");else{if(!((o=48<=(i=a)&&i<=57?i-48:-1)>=0))break;0===o?throwError(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?throwError(t,"repeat of an indentation width identifier"):(p=e+o-1,u=!0)}if(is_WHITE_SPACE(a)){do{a=t.input.charCodeAt(++t.position)}while(is_WHITE_SPACE(a));if(35===a)do{a=t.input.charCodeAt(++t.position)}while(!is_EOL(a)&&0!==a)}for(;0!==a;){for(readLineBreak(t),t.lineIndent=0,a=t.input.charCodeAt(t.position);(!u||t.lineIndent<p)&&32===a;)t.lineIndent++,a=t.input.charCodeAt(++t.position);if(!u&&t.lineIndent>p&&(p=t.lineIndent),is_EOL(a))f++;else{if(t.lineIndent<p){s===CHOMPING_KEEP?t.result+=_$common_7.repeat("\n",c?1+f:f):s===CHOMPING_CLIP&&c&&(t.result+="\n");break}for(n?is_WHITE_SPACE(a)?(l=!0,t.result+=_$common_7.repeat("\n",c?1+f:f)):l?(l=!1,t.result+=_$common_7.repeat("\n",f+1)):0===f?c&&(t.result+=" "):t.result+=_$common_7.repeat("\n",f):t.result+=_$common_7.repeat("\n",c?1+f:f),c=!0,u=!0,f=0,r=t.position;!is_EOL(a)&&0!==a;)a=t.input.charCodeAt(++t.position);captureSegment(t,r,t.position,!1)}}return!0}(t,f)||function(t,e){var r,n,o;if(39!==(r=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=o=t.position;0!==(r=t.input.charCodeAt(t.position));)if(39===r){if(captureSegment(t,n,t.position,!0),39!==(r=t.input.charCodeAt(++t.position)))return!0;n=t.position,t.position++,o=t.position}else is_EOL(r)?(captureSegment(t,n,o,!0),writeFoldedLines(t,skipSeparationSpace(t,!1,e)),n=o=t.position):t.position===t.lineStart&&testDocumentSeparator(t)?throwError(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);throwError(t,"unexpected end of the stream within a single quoted scalar")}(t,f)||function(t,e){var r,n,o,a,i,s,c;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return captureSegment(t,r,t.position,!0),t.position++,!0;if(92===s){if(captureSegment(t,r,t.position,!0),is_EOL(s=t.input.charCodeAt(++t.position)))skipSeparationSpace(t,!1,e);else if(s<256&&simpleEscapeCheck[s])t.result+=simpleEscapeMap[s],t.position++;else if((i=120===(c=s)?2:117===c?4:85===c?8:0)>0){for(o=i,a=0;o>0;o--)(i=fromHexCode(s=t.input.charCodeAt(++t.position)))>=0?a=(a<<4)+i:throwError(t,"expected hexadecimal character");t.result+=charFromCodepoint(a),t.position++}else throwError(t,"unknown escape sequence");r=n=t.position}else is_EOL(s)?(captureSegment(t,r,n,!0),writeFoldedLines(t,skipSeparationSpace(t,!1,e)),r=n=t.position):t.position===t.lineStart&&testDocumentSeparator(t)?throwError(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}throwError(t,"unexpected end of the stream within a double quoted scalar")}(t,f)?d=!0:function(t){var e,r,n;if(42!==(n=t.input.charCodeAt(t.position)))return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!is_WS_OR_EOL(n)&&!is_FLOW_INDICATOR(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&throwError(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),___hasOwnProperty_10.call(t.anchorMap,r)||throwError(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],skipSeparationSpace(t,!0,-1),!0}(t)?(d=!0,null===t.tag&&null===t.anchor||throwError(t,"alias node should not have any properties")):function(t,e,r){var n,o,a,i,s,c,u,p,f=t.kind,l=t.result;if(is_WS_OR_EOL(p=t.input.charCodeAt(t.position))||is_FLOW_INDICATOR(p)||35===p||38===p||42===p||33===p||124===p||62===p||39===p||34===p||37===p||64===p||96===p)return!1;if((63===p||45===p)&&(is_WS_OR_EOL(n=t.input.charCodeAt(t.position+1))||r&&is_FLOW_INDICATOR(n)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,i=!1;0!==p;){if(58===p){if(is_WS_OR_EOL(n=t.input.charCodeAt(t.position+1))||r&&is_FLOW_INDICATOR(n))break}else if(35===p){if(is_WS_OR_EOL(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&testDocumentSeparator(t)||r&&is_FLOW_INDICATOR(p))break;if(is_EOL(p)){if(s=t.line,c=t.lineStart,u=t.lineIndent,skipSeparationSpace(t,!1,-1),t.lineIndent>=e){i=!0,p=t.input.charCodeAt(t.position);continue}t.position=a,t.line=s,t.lineStart=c,t.lineIndent=u;break}}i&&(captureSegment(t,o,a,!1),writeFoldedLines(t,t.line-s),o=a=t.position,i=!1),is_WHITE_SPACE(p)||(a=t.position+1),p=t.input.charCodeAt(++t.position)}return captureSegment(t,o,a,!1),!!t.result||(t.kind=f,t.result=l,!1)}(t,f,CONTEXT_FLOW_IN===r)&&(d=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===_&&(d=s&&readBlockSequence(t,l))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&throwError(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),c=0,u=t.implicitTypes.length;c<u;c+=1)if((p=t.implicitTypes[c]).resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else ___hasOwnProperty_10.call(t.typeMap[t.kind||"fallback"],t.tag)?(p=t.typeMap[t.kind||"fallback"][t.tag],null!==t.result&&p.kind!==t.kind&&throwError(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result)?(t.result=p.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):throwError(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):throwError(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||d}function readDocument(t){var e,r,n,o,a=t.position,i=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(o=t.input.charCodeAt(t.position))&&(skipSeparationSpace(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==o));){for(i=!0,o=t.input.charCodeAt(++t.position),e=t.position;0!==o&&!is_WS_OR_EOL(o);)o=t.input.charCodeAt(++t.position);for(n=[],(r=t.input.slice(e,t.position)).length<1&&throwError(t,"directive name must not be less than one character in length");0!==o;){for(;is_WHITE_SPACE(o);)o=t.input.charCodeAt(++t.position);if(35===o){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&!is_EOL(o));break}if(is_EOL(o))break;for(e=t.position;0!==o&&!is_WS_OR_EOL(o);)o=t.input.charCodeAt(++t.position);n.push(t.input.slice(e,t.position))}0!==o&&readLineBreak(t),___hasOwnProperty_10.call(directiveHandlers,r)?directiveHandlers[r](t,r,n):throwWarning(t,'unknown document directive "'+r+'"')}skipSeparationSpace(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,skipSeparationSpace(t,!0,-1)):i&&throwError(t,"directives end mark is expected"),composeNode(t,t.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(t,!0,-1),t.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(t.input.slice(a,t.position))&&throwWarning(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&testDocumentSeparator(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,skipSeparationSpace(t,!0,-1)):t.position<t.length-1&&throwError(t,"end of the stream or a document separator is expected")}function loadDocuments(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var r=new State(t,e),n=t.indexOf("\0");for(-1!==n&&(r.position=n,throwError(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)readDocument(r);return r.documents}function loadAll(t,e,r){null!==e&&"object"==typeof e&&void 0===r&&(r=e,e=null);var n=loadDocuments(t,r);if("function"!=typeof e)return n;for(var o=0,a=n.length;o<a;o+=1)e(n[o])}function load(t,e){var r=loadDocuments(t,e);if(0!==r.length){if(1===r.length)return r[0];throw new _$exception_9("expected a single document in the stream, but found more")}}_$loader_10.loadAll=loadAll,_$loader_10.load=load,_$loader_10.safeLoadAll=function(t,e,r){return"object"==typeof e&&null!==e&&void 0===r&&(r=e,e=null),loadAll(t,e,_$common_7.extend({schema:_$default_safe_15},r))},_$loader_10.safeLoad=function(t,e){return load(t,_$common_7.extend({schema:_$default_safe_15},e))};var _$dumper_8={},___toString_8=Object.prototype.toString,___hasOwnProperty_8=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function encodeHex(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else{if(!(t<=4294967295))throw new _$exception_9("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+_$common_7.repeat("0",n-e.length)+e}function __State_8(t){this.schema=t.schema||_$default_full_14,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=_$common_7.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var r,n,o,a,i,s,c;if(null===e)return{};for(r={},o=0,a=(n=Object.keys(e)).length;o<a;o+=1)i=n[o],s=String(e[i]),"!!"===i.slice(0,2)&&(i="tag:yaml.org,2002:"+i.slice(2)),(c=t.compiledTypeMap.fallback[i])&&___hasOwnProperty_8.call(c.styleAliases,s)&&(s=c.styleAliases[s]),r[i]=s;return r}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(t,e){for(var r,n=_$common_7.repeat(" ",e),o=0,a=-1,i="",s=t.length;o<s;)-1===(a=t.indexOf("\n",o))?(r=t.slice(o),o=s):(r=t.slice(o,a+1),o=a+1),r.length&&"\n"!==r&&(i+=n),i+=r;return i}function generateNextLine(t,e){return"\n"+_$common_7.repeat(" ",t.indent*e)}function isWhitespace(t){return t===CHAR_SPACE||t===CHAR_TAB}function isPrintable(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&65279!==t||65536<=t&&t<=1114111}function isPlainSafe(t,e){return isPrintable(t)&&65279!==t&&t!==CHAR_COMMA&&t!==CHAR_LEFT_SQUARE_BRACKET&&t!==CHAR_RIGHT_SQUARE_BRACKET&&t!==CHAR_LEFT_CURLY_BRACKET&&t!==CHAR_RIGHT_CURLY_BRACKET&&t!==CHAR_COLON&&(t!==CHAR_SHARP||e&&function(t){return isPrintable(t)&&!isWhitespace(t)&&65279!==t&&t!==CHAR_CARRIAGE_RETURN&&t!==CHAR_LINE_FEED}(e))}function needIndentIndicator(t){return/^\n* /.test(t)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(t,e,r,n,o){var a,i,s,c,u=!1,p=!1,f=-1!==n,l=-1,_=isPrintable(c=t.charCodeAt(0))&&65279!==c&&!isWhitespace(c)&&c!==CHAR_MINUS&&c!==CHAR_QUESTION&&c!==CHAR_COLON&&c!==CHAR_COMMA&&c!==CHAR_LEFT_SQUARE_BRACKET&&c!==CHAR_RIGHT_SQUARE_BRACKET&&c!==CHAR_LEFT_CURLY_BRACKET&&c!==CHAR_RIGHT_CURLY_BRACKET&&c!==CHAR_SHARP&&c!==CHAR_AMPERSAND&&c!==CHAR_ASTERISK&&c!==CHAR_EXCLAMATION&&c!==CHAR_VERTICAL_LINE&&c!==CHAR_EQUALS&&c!==CHAR_GREATER_THAN&&c!==CHAR_SINGLE_QUOTE&&c!==CHAR_DOUBLE_QUOTE&&c!==CHAR_PERCENT&&c!==CHAR_COMMERCIAL_AT&&c!==CHAR_GRAVE_ACCENT&&!isWhitespace(t.charCodeAt(t.length-1));if(e)for(a=0;a<t.length;a++){if(!isPrintable(i=t.charCodeAt(a)))return STYLE_DOUBLE;s=a>0?t.charCodeAt(a-1):null,_=_&&isPlainSafe(i,s)}else{for(a=0;a<t.length;a++){if((i=t.charCodeAt(a))===CHAR_LINE_FEED)u=!0,f&&(p=p||a-l-1>n&&" "!==t[l+1],l=a);else if(!isPrintable(i))return STYLE_DOUBLE;s=a>0?t.charCodeAt(a-1):null,_=_&&isPlainSafe(i,s)}p=p||f&&a-l-1>n&&" "!==t[l+1]}return u||p?r>9&&needIndentIndicator(t)?STYLE_DOUBLE:p?STYLE_FOLDED:STYLE_LITERAL:_&&!o(t)?STYLE_PLAIN:STYLE_SINGLE}function writeScalar(t,e,r,n){t.dump=function(){if(0===e.length)return"''";if(!t.noCompatMode&&-1!==DEPRECATED_BOOLEANS_SYNTAX.indexOf(e))return"'"+e+"'";var o=t.indent*Math.max(1,r),a=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),i=n||t.flowLevel>-1&&r>=t.flowLevel;switch(chooseScalarStyle(e,i,t.indent,a,(function(e){return function(t,e){var r,n;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(t.implicitTypes[r].resolve(e))return!0;return!1}(t,e)}))){case STYLE_PLAIN:return e;case STYLE_SINGLE:return"'"+e.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(e,t.indent)+dropEndingNewline(indentString(e,o));case STYLE_FOLDED:return">"+blockHeader(e,t.indent)+dropEndingNewline(indentString(function(t,e){for(var r,n,o,a=/(\n+)([^\n]*)/g,i=(o=-1!==(o=t.indexOf("\n"))?o:t.length,a.lastIndex=o,foldLine(t.slice(0,o),e)),s="\n"===t[0]||" "===t[0];n=a.exec(t);){var c=n[1],u=n[2];r=" "===u[0],i+=c+(s||r||""===u?"":"\n")+foldLine(u,e),s=r}return i}(e,a),o));case STYLE_DOUBLE:return'"'+function(t){for(var e,r,n,o="",a=0;a<t.length;a++)(e=t.charCodeAt(a))>=55296&&e<=56319&&(r=t.charCodeAt(a+1))>=56320&&r<=57343?(o+=encodeHex(1024*(e-55296)+r-56320+65536),a++):o+=!(n=ESCAPE_SEQUENCES[e])&&isPrintable(e)?t[a]:n||encodeHex(e);return o}(e)+'"';default:throw new _$exception_9("impossible error: invalid scalar style")}}()}function blockHeader(t,e){var r=needIndentIndicator(t)?String(e):"",n="\n"===t[t.length-1];return r+(!n||"\n"!==t[t.length-2]&&"\n"!==t?n?"":"-":"+")+"\n"}function dropEndingNewline(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function foldLine(t,e){if(""===t||" "===t[0])return t;for(var r,n,o=/ [^ ]/g,a=0,i=0,s=0,c="";r=o.exec(t);)(s=r.index)-a>e&&(n=i>a?i:s,c+="\n"+t.slice(a,n),a=n+1),i=s;return c+="\n",t.length-a>e&&i>a?c+=t.slice(a,i)+"\n"+t.slice(i+1):c+=t.slice(a),c.slice(1)}function detectType(t,e,r){var n,o,a,i,s,c;for(a=0,i=(o=r?t.explicitTypes:t.implicitTypes).length;a<i;a+=1)if(((s=o[a]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof e&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(t.tag=r?s.tag:"?",s.represent){if(c=t.styleMap[s.tag]||s.defaultStyle,"[object Function]"===___toString_8.call(s.represent))n=s.represent(e,c);else{if(!___hasOwnProperty_8.call(s.represent,c))throw new _$exception_9("!<"+s.tag+'> tag resolver accepts not "'+c+'" style');n=s.represent[c](e,c)}t.dump=n}return!0}return!1}function writeNode(t,e,r,n,o,a){t.tag=null,t.dump=r,detectType(t,r,!1)||detectType(t,r,!0);var i=___toString_8.call(t.dump);n&&(n=t.flowLevel<0||t.flowLevel>e);var s,c,u="[object Object]"===i||"[object Array]"===i;if(u&&(c=-1!==(s=t.duplicates.indexOf(r))),(null!==t.tag&&"?"!==t.tag||c||2!==t.indent&&e>0)&&(o=!1),c&&t.usedDuplicates[s])t.dump="*ref_"+s;else{if(u&&c&&!t.usedDuplicates[s]&&(t.usedDuplicates[s]=!0),"[object Object]"===i)n&&0!==Object.keys(t.dump).length?(function(t,e,r,n){var o,a,i,s,c,u,p="",f=t.tag,l=Object.keys(r);if(!0===t.sortKeys)l.sort();else if("function"==typeof t.sortKeys)l.sort(t.sortKeys);else if(t.sortKeys)throw new _$exception_9("sortKeys must be a boolean or a function");for(o=0,a=l.length;o<a;o+=1)u="",n&&0===o||(u+=generateNextLine(t,e)),s=r[i=l[o]],writeNode(t,e+1,i,!0,!0,!0)&&((c=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&CHAR_LINE_FEED===t.dump.charCodeAt(0)?u+="?":u+="? "),u+=t.dump,c&&(u+=generateNextLine(t,e)),writeNode(t,e+1,s,!0,c)&&(t.dump&&CHAR_LINE_FEED===t.dump.charCodeAt(0)?u+=":":u+=": ",p+=u+=t.dump));t.tag=f,t.dump=p||"{}"}(t,e,t.dump,o),c&&(t.dump="&ref_"+s+t.dump)):(function(t,e,r){var n,o,a,i,s,c="",u=t.tag,p=Object.keys(r);for(n=0,o=p.length;n<o;n+=1)s="",0!==n&&(s+=", "),t.condenseFlow&&(s+='"'),i=r[a=p[n]],writeNode(t,e,a,!1,!1)&&(t.dump.length>1024&&(s+="? "),s+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),writeNode(t,e,i,!1,!1)&&(c+=s+=t.dump));t.tag=u,t.dump="{"+c+"}"}(t,e,t.dump),c&&(t.dump="&ref_"+s+" "+t.dump));else if("[object Array]"===i){var p=t.noArrayIndent&&e>0?e-1:e;n&&0!==t.dump.length?(function(t,e,r,n){var o,a,i="",s=t.tag;for(o=0,a=r.length;o<a;o+=1)writeNode(t,e+1,r[o],!0,!0)&&(n&&0===o||(i+=generateNextLine(t,e)),t.dump&&CHAR_LINE_FEED===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}(t,p,t.dump,o),c&&(t.dump="&ref_"+s+t.dump)):(function(t,e,r){var n,o,a="",i=t.tag;for(n=0,o=r.length;n<o;n+=1)writeNode(t,e,r[n],!1,!1)&&(0!==n&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=i,t.dump="["+a+"]"}(t,p,t.dump),c&&(t.dump="&ref_"+s+" "+t.dump))}else{if("[object String]"!==i){if(t.skipInvalid)return!1;throw new _$exception_9("unacceptable kind of an object to dump "+i)}"?"!==t.tag&&writeScalar(t,t.dump,e,a)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return!0}function getDuplicateReferences(t,e){var r,n,o=[],a=[];for(function t(e,r,n){var o,a,i;if(null!==e&&"object"==typeof e)if(-1!==(a=r.indexOf(e)))-1===n.indexOf(a)&&n.push(a);else if(r.push(e),Array.isArray(e))for(a=0,i=e.length;a<i;a+=1)t(e[a],r,n);else for(a=0,i=(o=Object.keys(e)).length;a<i;a+=1)t(e[o[a]],r,n)}(t,o,a),r=0,n=a.length;r<n;r+=1)e.duplicates.push(o[a[r]]);e.usedDuplicates=new Array(n)}function dump(t,e){var r=new __State_8(e=e||{});return r.noRefs||getDuplicateReferences(t,r),writeNode(r,0,t,!0,!0)?r.dump+"\n":""}_$dumper_8.dump=dump,_$dumper_8.safeDump=function(t,e){return dump(t,_$common_7.extend({schema:_$default_safe_15},e))};var _$jsYaml_6={};function deprecated(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}_$jsYaml_6.Type=_$type_18,_$jsYaml_6.Schema=_$schema_12,_$jsYaml_6.FAILSAFE_SCHEMA=_$failsafe_16,_$jsYaml_6.JSON_SCHEMA=_$json_17,_$jsYaml_6.CORE_SCHEMA=_$core_13,_$jsYaml_6.DEFAULT_SAFE_SCHEMA=_$default_safe_15,_$jsYaml_6.DEFAULT_FULL_SCHEMA=_$default_full_14,_$jsYaml_6.load=_$loader_10.load,_$jsYaml_6.loadAll=_$loader_10.loadAll,_$jsYaml_6.safeLoad=_$loader_10.safeLoad,_$jsYaml_6.safeLoadAll=_$loader_10.safeLoadAll,_$jsYaml_6.dump=_$dumper_8.dump,_$jsYaml_6.safeDump=_$dumper_8.safeDump,_$jsYaml_6.YAMLException=_$exception_9,_$jsYaml_6.MINIMAL_SCHEMA=_$failsafe_16,_$jsYaml_6.SAFE_SCHEMA=_$default_safe_15,_$jsYaml_6.DEFAULT_SCHEMA=_$default_full_14,_$jsYaml_6.scan=deprecated("scan"),_$jsYaml_6.parse=deprecated("parse"),_$jsYaml_6.compose=deprecated("compose"),_$jsYaml_6.addConstructor=deprecated("addConstructor");for(var _$yaml_5=_$jsYaml_6,_$staticJsYaml_35={safeLoad:_$yaml_5.safeLoad,load:_$yaml_5.load,safeDump:_$yaml_5.safeDump,dump:_$yaml_5.dump},_$base64Js_1={byteLength:function(t){var e=getLens(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=getLens(t),o=n[0],a=n[1],i=new Arr(function(t,e,r){return 3*(e+r)/4-r}(0,o,a)),s=0,c=a>0?o-4:o;for(r=0;r<c;r+=4)e=revLookup[t.charCodeAt(r)]<<18|revLookup[t.charCodeAt(r+1)]<<12|revLookup[t.charCodeAt(r+2)]<<6|revLookup[t.charCodeAt(r+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=255&e;return 2===a&&(e=revLookup[t.charCodeAt(r)]<<2|revLookup[t.charCodeAt(r+1)]>>4,i[s++]=255&e),1===a&&(e=revLookup[t.charCodeAt(r)]<<10|revLookup[t.charCodeAt(r+1)]<<4|revLookup[t.charCodeAt(r+2)]>>2,i[s++]=e>>8&255,i[s++]=255&e),i},fromByteArray:function(t){for(var e,r=t.length,n=r%3,o=[],a=0,i=r-n;a<i;a+=16383)o.push(encodeChunk(t,a,a+16383>i?i:a+16383));return 1===n?(e=t[r-1],o.push(lookup[e>>2]+lookup[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),o.join("")}},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",__i_1=0,len=code.length;__i_1<len;++__i_1)lookup[__i_1]=code[__i_1],revLookup[code.charCodeAt(__i_1)]=__i_1;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function encodeChunk(t,e,r){for(var n,o,a=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),a.push(lookup[(o=n)>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]);return a.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var _$ieee754_3={read:function(t,e,r,n,o){var a,i,s=8*o-n-1,c=(1<<s)-1,u=c>>1,p=-7,f=r?o-1:0,l=r?-1:1,_=t[e+f];for(f+=l,a=_&(1<<-p)-1,_>>=-p,p+=s;p>0;a=256*a+t[e+f],f+=l,p-=8);for(i=a&(1<<-p)-1,a>>=-p,p+=n;p>0;i=256*i+t[e+f],f+=l,p-=8);if(0===a)a=1-u;else{if(a===c)return i?NaN:1/0*(_?-1:1);i+=Math.pow(2,n),a-=u}return(_?-1:1)*i*Math.pow(2,a-n)},write:function(t,e,r,n,o,a){var i,s,c,u=8*a-o-1,p=(1<<u)-1,f=p>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:a-1,h=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,i=p):(i=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-i))<1&&(i--,c*=2),(e+=i+f>=1?l/c:l*Math.pow(2,1-f))*c>=2&&(i++,c/=2),i+f>=p?(s=0,i=p):i+f>=1?(s=(e*c-1)*Math.pow(2,o),i+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;t[r+_]=255&s,_+=h,s/=256,o-=8);for(i=i<<o|s,u+=o;u>0;t[r+_]=255&i,_+=h,i/=256,u-=8);t[r+_-h]|=128*d}},_$base64_4={exports:{}};(function(t,e){(function(){!function(t,e){var r,n;"object"==typeof _$base64_4.exports?_$base64_4.exports=e():"function"==typeof define&&define.amd?define(e):(r=t.Base64,(n=e()).noConflict=function(){return t.Base64=r,n},t.Meteor&&(Base64=n),t.Base64=n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:this,(function(){"use strict";var t,r="function"==typeof atob,n="function"==typeof btoa,o="function"==typeof e,a="function"==typeof TextDecoder?new TextDecoder:void 0,i="function"==typeof TextEncoder?new TextEncoder:void 0,s=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(t={},s.forEach((function(e,r){return t[e]=r})),t),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),f="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t,e){return void 0===e&&(e=function(t){return t}),new Uint8Array(Array.prototype.slice.call(t,0).map(e))},l=function(t){return t.replace(/=/g,"").replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"}))},_=function(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")},h=function(t){for(var e,r,n,o,a="",i=t.length%3,c=0;c<t.length;){if((r=t.charCodeAt(c++))>255||(n=t.charCodeAt(c++))>255||(o=t.charCodeAt(c++))>255)throw new TypeError("invalid character found");a+=s[(e=r<<16|n<<8|o)>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}return i?a.slice(0,i-3)+"===".substring(i):a},d=n?function(t){return btoa(t)}:o?function(t){return e.from(t,"binary").toString("base64")}:h,y=o?function(t){return e.from(t).toString("base64")}:function(t){for(var e=[],r=0,n=t.length;r<n;r+=4096)e.push(p.apply(null,t.subarray(r,r+4096)));return d(e.join(""))},v=function(t,e){return void 0===e&&(e=!1),e?l(y(t)):y(t)},m=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?p(192|e>>>6)+p(128|63&e):p(224|e>>>12&15)+p(128|e>>>6&63)+p(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return p(240|e>>>18&7)+p(128|e>>>12&63)+p(128|e>>>6&63)+p(128|63&e)},g=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,w=function(t){return t.replace(g,m)},b=o?function(t){return e.from(t,"utf8").toString("base64")}:i?function(t){return y(i.encode(t))}:function(t){return d(w(t))},E=function(t,e){return void 0===e&&(e=!1),e?l(b(t)):b(t)},S=function(t){return E(t,!0)},O=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,A=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return p(55296+(e>>>10))+p(56320+(1023&e));case 3:return p((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return p((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},x=function(t){return t.replace(O,A)},L=function(t){if(t=t.replace(/\s+/g,""),!u.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));for(var e,r,n,o="",a=0;a<t.length;)e=c[t.charAt(a++)]<<18|c[t.charAt(a++)]<<12|(r=c[t.charAt(a++)])<<6|(n=c[t.charAt(a++)]),o+=64===r?p(e>>16&255):64===n?p(e>>16&255,e>>8&255):p(e>>16&255,e>>8&255,255&e);return o},T=r?function(t){return atob(_(t))}:o?function(t){return e.from(t,"base64").toString("binary")}:L,R=o?function(t){return f(e.from(t,"base64"))}:function(t){return f(T(t),(function(t){return t.charCodeAt(0)}))},C=function(t){return R(P(t))},k=o?function(t){return e.from(t,"base64").toString("utf8")}:a?function(t){return a.decode(R(t))}:function(t){return x(T(t))},P=function(t){return _(t.replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})))},I=function(t){return k(P(t))},N=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}},j=function(){var t=function(t,e){return Object.defineProperty(String.prototype,t,N(e))};t("fromBase64",(function(){return I(this)})),t("toBase64",(function(t){return E(this,t)})),t("toBase64URI",(function(){return E(this,!0)})),t("toBase64URL",(function(){return E(this,!0)})),t("toUint8Array",(function(){return C(this)}))},$=function(){var t=function(t,e){return Object.defineProperty(Uint8Array.prototype,t,N(e))};t("toBase64",(function(t){return v(this,t)})),t("toBase64URI",(function(){return v(this,!0)})),t("toBase64URL",(function(){return v(this,!0)}))},F={version:"3.7.2",VERSION:"3.7.2",atob:T,atobPolyfill:L,btoa:d,btoaPolyfill:h,fromBase64:I,toBase64:E,encode:E,encodeURI:S,encodeURL:S,utob:w,btou:x,decode:I,isValid:function(t){if("string"!=typeof t)return!1;var e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},fromUint8Array:v,toUint8Array:C,extendString:j,extendUint8Array:$,extendBuiltins:function(){j(),$()},Base64:{}};return Object.keys(F).forEach((function(t){return F.Base64[t]=F[t]})),F}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_$buffer_2({}).Buffer),_$base64_4=_$base64_4.exports;var _$logical_50={};function ___arrayLikeToArray_50(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(_$logical_50,"__esModule",{value:!0}),_$logical_50.AND=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce((function(t,e){return t.map((function(t,r){return e[r]&&t}))}))},_$logical_50.FULL=function(t,e){return(r=Array(t).keys(),function(t){if(Array.isArray(t))return ___arrayLikeToArray_50(t)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return ___arrayLikeToArray_50(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_50(t,void 0):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(){return e}));var r},_$logical_50.NOT=function(t){return t.map((function(t){return!t}))},_$logical_50.OR=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce((function(t,e){return t.map((function(t,r){return e[r]||t}))}))};var _$download_46={};function ___typeof_46(t){return(___typeof_46="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ___regeneratorRuntime_46(){___regeneratorRuntime_46=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_46(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __asyncGeneratorStep_46(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}Object.defineProperty(_$download_46,"__esModule",{value:!0}),_$download_46.default=function(t,e){return _download.apply(this,arguments)};var cache=new Map;function _download(){var t;return t=___regeneratorRuntime_46().mark((function t(e,r){var n,o,a;return ___regeneratorRuntime_46().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(r=r||"Quantumult%20X/1.0.29 (iPhone14,5; iOS 15.4.1)")+e,!cache.has(n)){t.next=4;break}return t.abrupt("return",cache.get(n));case 4:return o=(0,_$openApi_52.HTTP)({headers:{"User-Agent":r}}),a=new Promise((function(t,r){o.get(e).then((function(e){var n=e.body;0===n.replace(/\s/g,"").length?r(new Error("\u8ba2\u9605\u5185\u5bb9\u4e3a\u7a7a\uff01")):t(n)}))})),cache.set(n,a),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})),(_download=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_46(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_46(a,n,o,i,s,"throw",t)}i(void 0)}))}).apply(this,arguments)}var _$geo_47={};Object.defineProperty(_$geo_47,"__esModule",{value:!0}),_$geo_47.getFlag=function(t){for(var e={"\ud83c\udde6\ud83c\uddff":["\u963f\u585e\u62dc\u7586"],"\ud83c\udde6\ud83c\uddf9":["\u5965\u5730\u5229","\u5967\u5730\u5229","Austria","\u7ef4\u4e5f\u7eb3"],"\ud83c\udde6\ud83c\uddfa":["AU","Australia","Sydney","\u6fb3\u5927\u5229\u4e9a","\u6fb3\u6d32","\u58a8\u5c14\u672c","\u6089\u5c3c","\u571f\u6fb3","\u4eac\u6fb3","\u5ee3\u6fb3","\u6eec\u6fb3","\u6caa\u6fb3","\u5e7f\u6fb3"],"\ud83c\udde7\ud83c\uddea":["BE","\u6bd4\u5229\u6642","\u6bd4\u5229\u65f6"],"\ud83c\udde7\ud83c\uddec":["\u4fdd\u52a0\u5229\u4e9a","\u4fdd\u52a0\u5229\u4e9e","Bulgaria"],"\ud83c\udde7\ud83c\udded":["BH","\u5df4\u6797"],"\ud83c\udde7\ud83c\udde9":["BD","\u5b5f\u52a0\u62c9"],"\ud83c\uddf5\ud83c\uddf0":["\u5df4\u57fa\u65af\u5766"],"\ud83c\uddf0\ud83c\udded":["\u67ec\u57d4\u5be8"],"\ud83c\uddfa\ud83c\udde6":["\u70cf\u514b\u862d","\u4e4c\u514b\u5170"],"\ud83c\udded\ud83c\uddf7":["\u514b\u7f57\u5730\u4e9a","HR","\u514b\u7f85\u5730\u4e9e"],"\ud83c\udde8\ud83c\udde6":["Canada","CANADA","CAN","Waterloo","\u52a0\u62ff\u5927","\u8499\u7279\u5229\u5c14","\u6e29\u54e5\u534e","\u6953\u8449","\u67ab\u53f6","\u6ed1\u94c1\u5362","\u591a\u4f26\u591a","CA"],"\ud83c\udde8\ud83c\udded":["\u745e\u58eb","\u82cf\u9ece\u4e16","Switzerland","Zurich"],"\ud83c\uddf3\ud83c\uddec":["\u5c3c\u65e5\u5229\u4e9a","NG","\u5c3c\u65e5\u5229\u4e9e"],"\ud83c\udde8\ud83c\uddff":["Czechia","\u6377\u514b"],"\ud83c\uddf8\ud83c\uddf0":["\u65af\u6d1b\u4f10\u514b","SK"],"\ud83c\uddf7\ud83c\uddf8":["RS","\u585e\u5c14\u7ef4\u4e9a"],"\ud83c\uddf2\ud83c\udde9":["\u6469\u723e\u591a\u74e6","MD","\u6469\u5c14\u591a\u74e6"],"\ud83c\udde9\ud83c\uddea":["DE","German","GERMAN","\u5fb7\u56fd","\u5fb7\u570b","\u6cd5\u5170\u514b\u798f","\u4eac\u5fb7","\u6eec\u5fb7","\u5ee3\u5fb7","\u6caa\u5fb7","\u5e7f\u5fb7","Frankfurt"],"\ud83c\udde9\ud83c\uddf0":["DK","DNK","\u4e39\u9ea6","\u4e39\u9ea5"],"\ud83c\uddea\ud83c\uddf8":["ES","\u897f\u73ed\u7259","Spain"],"\ud83c\uddea\ud83c\uddfa":["EU","\u6b27\u76df","\u6b27\u7f57\u5df4"],"\ud83c\uddeb\ud83c\uddee":["Finland","\u82ac\u5170","\u82ac\u862d","\u8d6b\u5c14\u8f9b\u57fa"],"\ud83c\uddeb\ud83c\uddf7":["FR","France","\u6cd5\u56fd","\u6cd5\u570b","\u5df4\u9ece"],"\ud83c\uddec\ud83c\udde7":["UK","GB","England","United Kingdom","\u82f1\u56fd","\u4f26\u6566","\u82f1","London"],"\ud83c\uddf2\ud83c\uddf4":["MO","Macao","\u6fb3\u95e8","\u6fb3\u9580","CTM"],"\ud83c\uddf0\ud83c\uddff":["\u54c8\u8428\u514b\u65af\u5766","\u54c8\u8428\u514b"],"\ud83c\udded\ud83c\uddfa":["\u5308\u7259\u5229","Hungary"],"\ud83c\udded\ud83c\uddf0":["HK","Hongkong","Hong Kong","HongKong","HONG KONG","\u9999\u6e2f","\u6df1\u6e2f","\u6caa\u6e2f","\u547c\u6e2f","HKT","HKBN","HGC","WTT","CMI","\u7a57\u6e2f","\u4eac\u6e2f","\u6e2f"],"\ud83c\uddee\ud83c\udde9":["Indonesia","\u5370\u5c3c","\u5370\u5ea6\u5c3c\u897f\u4e9a","\u96c5\u52a0\u8fbe"],"\ud83c\uddee\ud83c\uddea":["Ireland","IRELAND","\u7231\u5c14\u5170","\u611b\u723e\u862d","\u90fd\u67cf\u6797"],"\ud83c\uddee\ud83c\uddf1":["Israel","\u4ee5\u8272\u5217"],"\ud83c\uddee\ud83c\uddf3":["India","IND","INDIA","\u5370\u5ea6","\u5b5f\u4e70","MFumbai"],"\ud83c\uddee\ud83c\uddf8":["IS","ISL","\u51b0\u5c9b","\u51b0\u5cf6"],"\ud83c\uddf0\ud83c\uddf5":["KP","\u671d\u9c9c"],"\ud83c\uddf0\ud83c\uddf7":["KR","Korea","KOR","\u97e9\u56fd","\u9996\u5c14","\u97e9","\u97d3","\u6625\u5ddd","Chuncheon","Seoul"],"\ud83c\uddf1\ud83c\uddfa":["\u5362\u68ee\u5821"],"\ud83c\uddf1\ud83c\uddfb":["Latvia","Latvija","\u62c9\u8131\u7ef4\u4e9a"],"\ud83c\uddf2\ud83c\uddfd":["MEX","MX","\u58a8\u897f\u54e5"],"\ud83c\uddf2\ud83c\uddfe":["MY","Malaysia","MALAYSIA","\u9a6c\u6765\u897f\u4e9a","\u5927\u99ac","\u99ac\u4f86\u897f\u4e9e","\u5409\u9686\u5761"],"\ud83c\uddf3\ud83c\uddf1":["NL","Netherlands","\u8377\u5170","\u8377\u862d","\u5c3c\u5fb7\u862d","\u963f\u59c6\u65af\u7279\u4e39"],"\ud83c\uddf3\ud83c\uddf5":["\u5c3c\u6cca\u5c14"],"\ud83c\uddf5\ud83c\udded":["PH","Philippines","\u83f2\u5f8b\u5bbe","\u83f2\u5f8b\u8cd3"],"\ud83c\uddf5\ud83c\uddf7":["PR","\u6ce2\u591a\u9ece\u5404"],"\ud83c\uddf7\ud83c\uddf4":["RO","\u7f57\u9a6c\u5c3c\u4e9a"],"\ud83c\uddf7\ud83c\uddfa":["RU","Russia","\u4fc4\u7f57\u65af","\u4fc4\u56fd","\u4fc4\u7f85\u65af","\u4f2f\u529b","\u83ab\u65af\u79d1","\u5723\u5f7c\u5f97\u5821","\u897f\u4f2f\u5229\u4e9a","\u65b0\u897f\u4f2f\u5229\u4e9a","\u4eac\u4fc4","\u676d\u4fc4","\u5ee3\u4fc4","\u6eec\u4fc4","\u5e7f\u4fc4","\u6caa\u4fc4","Moscow"],"\ud83c\uddf8\ud83c\udde6":["\u6c99\u7279"],"\ud83c\uddf8\ud83c\uddea":["SE","Sweden","\u745e\u5178"],"\ud83c\uddf2\ud83c\uddf9":["\u9a6c\u8033\u4ed6"],"\ud83c\uddf2\ud83c\udde6":["MA","\u6469\u6d1b\u54e5"],"\ud83c\uddf8\ud83c\uddec":["SG","Singapore","SINGAPORE","\u65b0\u52a0\u5761","\u72ee\u57ce","\u6caa\u65b0","\u4eac\u65b0","\u6cc9\u65b0","\u7a57\u65b0","\u6df1\u65b0","\u676d\u65b0","\u5e7f\u65b0","\u5ee3\u65b0","\u6eec\u65b0"],"\ud83c\uddf9\ud83c\udded":["TH","Thailand","\u6cf0\u56fd","\u6cf0\u570b","\u66fc\u8c37"],"\ud83c\uddf9\ud83c\uddf7":["TR","Turkey","\u571f\u8033\u5176","\u4f0a\u65af\u5766\u5e03\u5c14"],"\ud83c\uddf9\ud83c\uddfc":["TW","Taiwan","TAIWAN","\u53f0\u6e7e","\u53f0\u5317","\u53f0\u4e2d","\u65b0\u5317","\u5f70\u5316","CHT","\u53f0","HINET","Taipei"],"\ud83c\uddfa\ud83c\uddf8":["US","USA","America","United States","\u7f8e\u56fd","\u7f8e","\u4eac\u7f8e","\u6ce2\u7279\u5170","\u8fbe\u62c9\u65af","\u4fc4\u52d2\u5188","\u51e4\u51f0\u57ce","\u8d39\u5229\u8499","\u7845\u8c37","\u77fd\u8c37","\u62c9\u65af\u7ef4\u52a0\u65af","\u6d1b\u6749\u77f6","\u5723\u4f55\u585e","\u5723\u514b\u62c9\u62c9","\u897f\u96c5\u56fe","\u829d\u52a0\u54e5","\u6caa\u7f8e","\u54e5\u4f26\u5e03","\u7ebd\u7ea6","Los Angeles","San Jose","Sillicon Valley","Michigan"],"\ud83c\uddfb\ud83c\uddf3":["VN","\u8d8a\u5357","\u80e1\u5fd7\u660e\u5e02"],"\ud83c\uddfb\ud83c\uddea":["VE","\u59d4\u5185\u745e\u62c9"],"\ud83c\uddee\ud83c\uddf9":["Italy","IT","Nachash","\u610f\u5927\u5229","\u7c73\u5170","\u7fa9\u5927\u5229"],"\ud83c\uddff\ud83c\udde6":["South Africa","\u5357\u975e"],"\ud83c\udde6\ud83c\uddea":["United Arab Emirates","\u963f\u8054\u914b","\u8fea\u62dc","AE"],"\ud83c\udde7\ud83c\uddf7":["BR","Brazil","\u5df4\u897f","\u5723\u4fdd\u7f57"],"\ud83c\uddef\ud83c\uddf5":["JP","Japan","JAPAN","\u65e5\u672c","\u4e1c\u4eac","\u5927\u962a","\u57fc\u7389","\u6caa\u65e5","\u7a57\u65e5","\u5ddd\u65e5","\u4e2d\u65e5","\u6cc9\u65e5","\u676d\u65e5","\u6df1\u65e5","\u8fbd\u65e5","\u5e7f\u65e5","\u5927\u5742","Osaka","Tokyo"],"\ud83c\udde6\ud83c\uddf7":["AR","\u963f\u6839\u5ef7"],"\ud83c\uddf3\ud83c\uddf4":["Norway","\u632a\u5a01","NO"],"\ud83c\udde8\ud83c\uddf3":["CN","China","\u56de\u56fd","\u4e2d\u56fd","\u4e2d\u570b","\u6c5f\u82cf","\u5317\u4eac","\u4e0a\u6d77","\u5e7f\u5dde","\u6df1\u5733","\u676d\u5dde","\u5f90\u5dde","\u9752\u5c9b","\u5b81\u6ce2","\u9547\u6c5f","back"],"\ud83c\uddf5\ud83c\uddf1":["PL","POL","\u6ce2\u5170","\u6ce2\u862d"],"\ud83c\udde8\ud83c\uddf1":["\u667a\u5229"],"\ud83c\uddf3\ud83c\uddff":["\u65b0\u897f\u862d","\u65b0\u897f\u5170"],"\ud83c\uddec\ud83c\uddf7":["\u5e0c\u814a","\u5e0c\u81d8"],"\ud83c\uddea\ud83c\uddec":["\u57c3\u53ca"],"\ud83c\udde8\ud83c\uddfe":["CY","\u585e\u6d66\u8def\u65af"],"\ud83c\udde8\ud83c\uddf7":["CR","\u54e5\u65af\u8fbe\u9ece\u52a0"],"\ud83c\uddf8\ud83c\uddee":["SI","\u65af\u6d1b\u6587\u5c3c\u4e9a"],"\ud83c\uddf1\ud83c\uddf9":["LT","\u7acb\u9676\u5b9b"],"\ud83c\uddf5\ud83c\udde6":["PA","\u5df4\u62ff\u9a6c"],"\ud83c\uddf9\ud83c\uddf3":["TN","\u7a81\u5c3c\u65af"],"\ud83c\uddee\ud83c\uddf2":["\u9a6c\u6069\u5c9b","\u99ac\u6069\u5cf6"],"\ud83c\udde7\ud83c\uddfe":["BY","\u767d\u4fc4","\u767d\u4fc4\u7f57\u65af"],"\ud83c\uddf5\ud83c\uddf9":["\u8461\u8404\u7259"],"\ud83c\uddf0\ud83c\uddea":["KE","\u80af\u5c3c\u4e9a"],"\ud83c\uddf0\ud83c\uddec":["KG","\u5409\u5c14\u5409\u65af\u5766"],"\ud83c\uddef\ud83c\uddf4":["JO","\u7ea6\u65e6"],"\ud83c\uddfa\ud83c\uddfe":["UY","\u4e4c\u62c9\u572d"],"\ud83c\uddf2\ud83c\uddf3":["\u8499\u53e4"],"\ud83c\uddee\ud83c\uddf7":["IR","\u4f0a\u6717"],"\ud83c\uddf5\ud83c\uddea":["\u79d8\u9c81","\u7955\u9b6f"],"\ud83c\udde8\ud83c\uddf4":["\u54e5\u4f26\u6bd4\u4e9a"],"\ud83c\uddea\ud83c\uddea":["\u7231\u6c99\u5c3c\u4e9a"],"\ud83c\uddea\ud83c\udde8":["EC","\u5384\u74dc\u591a\u5c14"],"\ud83c\uddf2\ud83c\uddf0":["\u9a6c\u5176\u987f","\u99ac\u5176\u9813"],"\ud83c\udde7\ud83c\udde6":["\u6ce2\u9ed1\u5171\u548c\u56fd","\u6ce2\u9ed1"],"\ud83c\uddec\ud83c\uddea":["\u683c\u9b6f\u5409\u4e9e","\u683c\u9c81\u5409\u4e9a"],"\ud83c\udde6\ud83c\uddf1":["\u963f\u723e\u5df4\u5c3c\u4e9e","\u963f\u5c14\u5df4\u5c3c\u4e9a"],"\ud83c\udff3\ufe0f\u200d\ud83c\udf08":["\u6d41\u91cf","\u65f6\u95f4","\u5e94\u6025","\u8fc7\u671f","Bandwidth","expire"]},r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];if(e[o].some((function(e){return-1!==t.indexOf(e)})))return o}return(t.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/)||[])[0]||"\ud83c\udff4\u200d\u2620\ufe0f"};var _$proxyUtils_37={};function ___typeof_37(t){return(___typeof_37="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_$proxyUtils_37,"__esModule",{value:!0}),_$proxyUtils_37.ApplyProcessor=ApplyProcessor,_$proxyUtils_37.ProxyUtils=void 0;var ___download_37=_interopRequireDefault(_$download_46),_app=_interopRequireDefault(_$app_36);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function ___regeneratorRuntime_37(){___regeneratorRuntime_37=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_37(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __asyncGeneratorStep_37(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function ___asyncToGenerator_37(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_37(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_37(a,n,o,i,s,"throw",t)}i(void 0)}))}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(c){s=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function __ownKeys_37(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_37(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?__ownKeys_37(Object(r),!0).forEach((function(e){___defineProperty_37(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__ownKeys_37(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ___defineProperty_37(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ___createForOfIteratorHelper_37(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return ___arrayLikeToArray_37(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_37(t,e):void 0}}function ___arrayLikeToArray_37(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var PROXY_PREPROCESSORS=[{name:"HTML",test:function(t){return/^<!DOCTYPE html>/.test(t)},parse:function(){return""}},(keys=["dm1lc3M","c3NyOi8v","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c"],{name:"Base64 Pre-processor",test:function(t){return keys.some((function(e){return-1!==t.indexOf(e)}))},parse:function(t){return _$base64_4.Base64.decode(t)}}),{name:"Clash Pre-processor",test:function(t){return/proxies/.test(t)},parse:function(t){return(0,_$staticJsYaml_35.safeLoad)(t).proxies.map((function(t){return JSON.stringify(t)})).join("\n")}},{name:"SSD Pre-processor",test:function(t){return 0===t.indexOf("ssd://")},parse:function(t){for(var e=[],r=JSON.parse(_$base64_4.Base64.decode(t.split("ssd://")[1])),n=r.port,o=r.encryption,a=r.password,i=r.servers,s=0;s<i.length;s++){var c=i[s];o=c.encryption?c.encryption:o,a=c.password?c.password:a;var u=_$base64_4.Base64.encode(o+":"+a),p=c.server;n=c.port?c.port:n;var f=c.remarks?c.remarks:s,l=c.plugin_options?"/?plugin="+encodeURIComponent(c.plugin+";"+c.plugin_options):"";e[s]="ss://"+u+"@"+p+":"+n+l+"#"+f}return e.join("\n")}}],PROXY_PARSERS=function(){function t(t){var e=t.split(","),r={},n=["shadowsocks","vmess","http","trojan"];return e.forEach((function(t){var e=_slicedToArray(t.split("="),2),o=e[0],a=e[1];if(o=o.trim(),a=a.trim(),-1!==n.indexOf(o)){r.type=o;var i=a.split(":");r.server=i[0],r.port=i[1]}else r[o.trim()]=a.trim()})),r}function e(){return{name:"Loon HTTP Parser",test:function(t){return/^.*=\s*http/i.test(t.split(",")[0])&&5===t.split(",").length&&-1===t.indexOf("username")&&-1===t.indexOf("password")},parse:function(t){var e=t.split("=")[1].split(","),r={name:t.split("=")[0].trim(),type:"http",server:e[1],port:e[2],tls:"443"===e[2]};return e[3]&&(r.username=e[3]),e[4]&&(r.password=e[4]),r.tls&&(r.sni=e["tls-name"]||r.server,r["skip-cert-verify"]=JSON.parse(e["skip-cert-verify"]||"false")),r}}}function r(t){var e={};e.name=t.split("=")[0].trim();var r=t.split(",");e.server=r[1].trim(),e.port=r[2].trim();for(var n=3;n<r.length;n++){var o=r[n];if(-1!==o.indexOf("=")){var a=_slicedToArray(o.split("="),2),i=a[0],s=a[1];e[i.trim()]=s.trim()}}return e}return[{name:"URI SS Parser",test:function(t){return/^ss:\/\//.test(t)},parse:function(t){var e={},r=t.split("ss://")[1],n={name:decodeURIComponent(t.split("#")[1]),type:"ss",supported:e},o=(r=r.split("#")[0]).match(/@([^/]*)(\/|$)/)[1],a=o.lastIndexOf(":");n.server=o.substring(0,a),n.port=o.substring(a+1);var i=_$base64_4.Base64.decode(r.split("@")[0]).split(":");if(n.cipher=i[0],n.password=i[1],-1!==r.indexOf("?plugin=")){var s,c={},u=___createForOfIteratorHelper_37(("plugin="+decodeURIComponent(r.split("?plugin=")[1].split("&")[0])).split(";"));try{for(u.s();!(s=u.n()).done;){var p=_slicedToArray(s.value.split("="),2),f=p[0],l=p[1];f&&(c[f]=l||!0)}}catch(_){u.e(_)}finally{u.f()}switch(c.plugin){case"obfs-local":case"simple-obfs":n.plugin="obfs",n["plugin-opts"]={mode:c.obfs,host:c["obfs-host"]};break;case"v2ray-plugin":n.supported=___objectSpread_37(___objectSpread_37({},e),{},{Loon:!1,Surge:!1}),n.obfs="v2ray-plugin",n["plugin-opts"]={mode:"websocket",host:c["obfs-host"],path:c.path||"",tls:c.tls||!1};break;default:throw new Error("Unsupported plugin option: ".concat(c.plugin))}}return n}},(n={Surge:!1},{name:"URI SSR Parser",test:function(t){return/^ssr:\/\//.test(t)},parse:function(t){var e=(t=_$base64_4.Base64.decode(t.split("ssr://")[1])).indexOf(":origin");-1===e&&(e=t.indexOf(":auth_"));var r=t.substring(0,e),o=r.substring(0,r.lastIndexOf(":")),a=r.substring(r.lastIndexOf(":")+1),i=t.substring(e+1).split("/?")[0].split(":"),s={type:"ssr",server:o,port:a,protocol:i[0],cipher:i[1],obfs:i[2],password:_$base64_4.Base64.decode(i[3]),supported:n},c={};if((t=t.split("/?")[1].split("&")).length>1){var u,p=___createForOfIteratorHelper_37(t);try{for(p.s();!(u=p.n()).done;){var f=_slicedToArray(u.value.split("="),2),l=f[0],_=f[1];c[l]=_.trim()}}catch(h){p.e(h)}finally{p.f()}}return ___objectSpread_37(___objectSpread_37({},s),{},{name:c.remarks?_$base64_4.Base64.decode(c.remarks):s.server,"protocol-param":_$base64_4.Base64.decode(c.protoparam||"").replace(/\s/g,""),"obfs-param":_$base64_4.Base64.decode(c.obfsparam||"").replace(/\s/g,"")})}}),{name:"URI VMess Parser",test:function(t){return/^vmess:\/\//.test(t)},parse:function(t){t=t.split("vmess://")[1];var e=_$base64_4.Base64.decode(t);if(/=\s*vmess/.test(e)){var r,n=e.split(",").map((function(t){return t.trim()})),o={},a=___createForOfIteratorHelper_37(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(-1!==i.indexOf("=")){var s=_slicedToArray(i.split("="),2),c=s[0],u=s[1];o[c.trim()]=u.trim()}}}catch(h){a.e(h)}finally{a.f()}var p={name:n[0].split("=")[0].trim(),type:"vmess",server:n[1],port:n[2],cipher:n[3],uuid:n[4].match(/^"(.*)"$/)[1],tls:"over-tls"===o.obfs||"wss"===o.obfs};if(void 0!==o["udp-relay"]&&(p.udp=JSON.parse(o["udp-relay"])),void 0!==o["fast-open"]&&(p.udp=JSON.parse(o["fast-open"])),"ws"===o.obfs||"wss"===o.obfs){p.network="ws",p["ws-opts"].path=(o["obfs-path"]||'"/"').match(/^"(.*)"$/)[1];var f=o["obfs-header"];f&&-1!==f.indexOf("Host")&&(f=f.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),p["ws-opts"].headers={Host:f||p.server}}return p.tls&&"false"===o['"tls-verification"']&&(p["skip-cert-verify"]=!0),p.tls&&o["obfs-host"]&&(p.sni=o["obfs-host"]),p}var l=JSON.parse(e),_={name:l.ps,type:"vmess",server:l.add,port:l.port,cipher:"auto",uuid:l.id,alterId:l.aid||0,tls:"tls"===l.tls||!0===l.tls,supported:{}};return"ws"===l.net&&(_.network="ws",_["ws-opts"]={path:l.path,headers:{Host:l.host||l.add}},_.tls&&l.host&&(_.sni=l.host)),!1===l.verify_cert&&(_["skip-cert-verify"]=!0),_}},{name:"URI Trojan Parser",test:function(t){return/^trojan:\/\//.test(t)},parse:function(t){var e=_slicedToArray((t=t.split("trojan://")[1]).split("@")[1].split("?")[0].split(":"),2),r=e[0],n=e[1],o=decodeURIComponent(t.split("#")[1].trim()),a=t.split("?"),i=null;return a.length>1&&(a=a[1].split("#")[0].split("&"),i=new Map(a.map((function(t){return t.split("=")}))).get("sni")),{name:o||"[Trojan] ".concat(r),type:"trojan",server:r,port:n,password:t.split("@")[0],sni:i,supported:{}}}},{name:"Clash Parser",test:function(t){try{JSON.parse(t)}catch(e){return!1}return!0},parse:function(t){return JSON.parse(t)}},{name:"Surge SS Parser",test:function(t){return/^.*=\s*ss/.test(t.split(",")[0])},parse:function(t){var e=r(t),n={name:e.name,type:"ss",server:e.server,port:e.port,cipher:e["encrypt-method"],password:e.password,tfo:JSON.parse(e.tfo||"false"),udp:JSON.parse(e["udp-relay"]||"false")};return e.obfs&&(n.plugin="obfs",n["plugin-opts"]={mode:e.obfs,host:e["obfs-host"]}),n}},{name:"Surge VMess Parser",test:function(t){return/^.*=\s*vmess/.test(t.split(",")[0])&&-1!==t.indexOf("username")},parse:function(t){var e=r(t),n={name:e.name,type:"vmess",server:e.server,port:e.port,uuid:e.username,alterId:0,cipher:"none",tls:JSON.parse(e.tls||"false"),tfo:JSON.parse(e.tfo||"false")};if(n.tls&&(void 0!==e["skip-cert-verify"]&&(n["skip-cert-verify"]=!0===e["skip-cert-verify"]||"1"===e["skip-cert-verify"]),n.sni=e.sni||e.server),JSON.parse(e.ws||"false")){n.network="ws",n["ws-opts"]={path:e["ws-path"]};var o=e["ws-headers"].match(/(,|^|\s)*HOST:\s*(.*?)(,|$)/),a=o?o[2]:n.server;n["ws-opts"].headers={Host:a||e.server}}return n}},{name:"Surge Trojan Parser",test:function(t){return/^.*=\s*trojan/.test(t.split(",")[0])&&-1!==t.indexOf("sni")},parse:function(t){var e=r(t),n={name:e.name,type:"trojan",server:e.server,port:e.port,password:e.password,sni:e.sni||e.server,tfo:JSON.parse(e.tfo||"false")};return void 0!==e["skip-cert-verify"]&&(n["skip-cert-verify"]=!0===e["skip-cert-verify"]||"1"===e["skip-cert-verify"]),n}},{name:"Surge HTTP Parser",test:function(t){return/^.*=\s*https?/.test(t.split(",")[0])&&!e().test(t)},parse:function(t){var e=r(t),n=/^.*?=\s?https/.test(t),o={name:e.name,type:"http",server:e.server,port:e.port,tls:JSON.parse(n||"false"),tfo:JSON.parse(e.tfo||"false")};return o.tls&&(void 0!==e["skip-cert-verify"]&&(o["skip-cert-verify"]=!0===e["skip-cert-verify"]||"1"===e["skip-cert-verify"]),o.sni=e.sni||e.server),e.username&&"none"!==e.username&&(o.username=e.username),e.password&&"none"!==e.password&&(o.password=e.password),o}},{name:"Loon SS Parser",test:function(t){return"shadowsocks"===t.split(",")[0].split("=")[1].trim().toLowerCase()},parse:function(t){var e=t.split("=")[1].split(","),r={name:t.split("=")[0].trim(),type:"ss",server:e[1],port:e[2],cipher:e[3],password:e[4].replace(/"/g,"")};return e.length>5&&(r.plugin="obfs",r["plugin-opts"]={mode:e[5],host:e[6]}),r}},{name:"Loon SSR Parser",test:function(t){return"shadowsocksr"===t.split(",")[0].split("=")[1].trim().toLowerCase()},parse:function(t){var e=t.split("=")[1].split(",");return{name:t.split("=")[0].trim(),type:"ssr",server:e[1],port:e[2],cipher:e[3],password:e[4].replace(/"/g,""),protocol:e[5],"protocol-param":e[6].match(/{(.*)}/)[1],supported:{Surge:!1},obfs:e[7],"obfs-param":e[8].match(/{(.*)}/)[1]}}},{name:"Loon VMess Parser",test:function(t){return/^.*=\s*vmess/i.test(t.split(",")[0])&&-1===t.indexOf("username")},parse:function(t){var e,r=t.split("=")[1].split(","),n={name:t.split("=")[0].trim(),type:"vmess",server:r[1],port:r[2],cipher:r[3]||"none",uuid:r[4].replace(/"/g,""),alterId:0},o=___createForOfIteratorHelper_37(r=r.splice(5));try{for(o.s();!(e=o.n()).done;){var a=_slicedToArray(e.value.split(":"),2),i=a[0],s=a[1];r[i]=s}}catch(c){o.e(c)}finally{o.f()}switch(n.tls=JSON.parse(r["over-tls"]||"false"),n.tls&&(n.sni=r["tls-name"]||n.server,n["skip-cert-verify"]=JSON.parse(r["skip-cert-verify"]||"false")),r.transport){case"tcp":break;case"ws":n.network=r.transport,n["ws-opts"]={path:r.path,headers:{Host:r.host}}}return n.tls&&(n["skip-cert-verify"]=JSON.parse(r["skip-cert-verify"]||"false")),n}},{name:"Loon Trojan Parser",test:function(t){return/^.*=\s*trojan/i.test(t.split(",")[0])&&-1===t.indexOf("password")},parse:function(t){var e=t.split("=")[1].split(","),r={name:t.split("=")[0].trim(),type:"trojan",server:e[1],port:e[2],password:e[3].replace(/"/g,""),sni:e[1],"skip-cert-verify":JSON.parse(e["skip-cert-verify"]||"false")};if(e.length>4){var n=_slicedToArray(e[4].split(":"),2),o=n[0],a=n[1];if("tls-name"!==o)throw new Error("Unknown option ".concat(o," for line: \n").concat(t));r.sni=a}return r}},e(),{name:"QX SS Parser",test:function(t){return/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&-1===t.indexOf("ssr-protocol")},parse:function(e){var r=t(e),n={name:r.tag,type:"ss",server:r.server,port:r.port,cipher:r.method,password:r.password,udp:JSON.parse(r["udp-relay"]||"false"),tfo:JSON.parse(r["fast-open"]||"false"),supported:{}};if(r.obfs)switch(n["plugin-opts"]={host:r["obfs-host"]||n.server},r.obfs){case"http":case"tls":n.plugin="obfs",n["plugin-opts"].mode=r.obfs;break;case"ws":case"wss":n["plugin-opts"]=___objectSpread_37(___objectSpread_37({},n["plugin-opts"]),{},{mode:"websocket",path:r["obfs-uri"]||"/",tls:"wss"===r.obfs}),n["plugin-opts"].tls&&void 0!==r["tls-verification"]&&(n["plugin-opts"]["skip-cert-verify"]=r["tls-verification"]),n.plugin="v2ray-plugin",n.supported.Surge=!1,n.supported.Loon=!1}return n}},{name:"QX SSR Parser",test:function(t){return/^shadowsocks\s*=/.test(t.split(",")[0].trim())&&-1!==t.indexOf("ssr-protocol")},parse:function(e){var r=t(e),n={name:r.tag,type:"ssr",server:r.server,port:r.port,cipher:r.method,password:r.password,protocol:r["ssr-protocol"],obfs:"plain","protocol-param":r["ssr-protocol-param"],udp:JSON.parse(r["udp-relay"]||"false"),tfo:JSON.parse(r["fast-open"]||"false"),supported:{Surge:!1}};return r.obfs&&(n.obfs=r.obfs,n["obfs-param"]=r["obfs-host"]),n}},{name:"QX VMess Parser",test:function(t){return/^vmess\s*=/.test(t.split(",")[0].trim())},parse:function(e){var r=t(e),n={type:"vmess",name:r.tag,server:r.server,port:r.port,cipher:r.method||"none",uuid:r.password,alterId:0,tls:"over-tls"===r.obfs||"wss"===r.obfs,udp:JSON.parse(r["udp-relay"]||"false"),tfo:JSON.parse(r["fast-open"]||"false")};return n.tls&&(n.sni=r["obfs-host"]||r.server,n["skip-cert-verify"]=!JSON.parse(r["tls-verification"]||"true")),"ws"!==r.obfs&&"wss"!==r.obfs||(n.network="ws",n["ws-opts"]={path:r["obfs-uri"],headers:{Host:r["obfs-host"]||r.server}}),n}},{name:"QX Trojan Parser",test:function(t){return/^trojan\s*=/.test(t.split(",")[0].trim())},parse:function(e){var r=t(e),n={type:"trojan",name:r.tag,server:r.server,port:r.port,password:r.password,sni:r["tls-host"]||r.server,udp:JSON.parse(r["udp-relay"]||"false"),tfo:JSON.parse(r["fast-open"]||"false")};return n["skip-cert-verify"]=!JSON.parse(r["tls-verification"]||"true"),n}},{name:"QX HTTP Parser",test:function(t){return/^http\s*=/.test(t.split(",")[0].trim())},parse:function(e){var r=t(e),n={type:"http",name:r.tag,server:r.server,port:r.port,tls:JSON.parse(r["over-tls"]||"false"),udp:JSON.parse(r["udp-relay"]||"false"),tfo:JSON.parse(r["fast-open"]||"false")};return r.username&&"none"!==r.username&&(n.username=r.username),r.password&&"none"!==r.password&&(n.password=r.password),n.tls&&(n.sni=r["tls-host"]||n.server,n["skip-cert-verify"]=!JSON.parse(r["tls-verification"]||"true")),n}}];var n}(),PROXY_PROCESSORS=function(){function SetPropertyOperator(t){var e=t.key,r=t.value;return{name:"Set Property Operator",func:function(t){return t.map((function(t){return t[e]=r,t}))}}}function FlagOperator(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{name:"Flag Operator",func:function(e){return e.map((function(e){if(t){var r=(0,_$geo_47.getFlag)(e.name);e.name=removeFlag(e.name),e.name=r+" "+e.name,e.name=e.name.replace(/\ud83c\uddf9\ud83c\uddfc/g,"\ud83c\udde8\ud83c\uddf3")}else e.name=removeFlag(e.name);return e}))}}}function HandleDuplicateOperator(t){var e=___objectSpread_37(___objectSpread_37({},{action:"rename",template:"0 1 2 3 4 5 6 7 8 9",link:"-",position:"back"}),t),r=e.action,n=e.template,o=e.link,a=e.position;return{name:"Handle Duplicate Operator",func:function(t){if("delete"===r){var e={};return t.filter((function(t){return!e[t.name]&&(e[t.name]=!0,!0)}))}if("rename"===r){var i=n.split(" "),s={},c=0;t.forEach((function(t){void 0===s[t.name]?s[t.name]=1:s[t.name]++,c=Math.max(s[t.name].toString().length,c)}));var u={};return t.map((function(t){if(s[t.name]>1){void 0===u[t.name]&&(u[t.name]=1);for(var e="",r=u[t.name]++,n=0;r>0;)e=i[r%10]+e,r=parseInt(r/10),n++;for(;n++<c;)e=i[0]+e;"front"===a?t.name=e+o+t.name:"back"===a&&(t.name=t.name+o+e)}return t}))}}}}function SortOperator(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc";return{name:"Sort Operator",func:function(e){switch(t){case"asc":case"desc":return e.sort((function(e,r){return(e.name>r.name?1:-1)*("desc"===t?-1:1)}));case"random":return shuffle(e);default:throw new Error("Unknown sort option: "+t)}}}}function RegexSortOperator(t){return{name:"Regex Sort Operator",func:function(e){return t=t.map((function(t){return buildRegex(t)})),e.sort((function(e,r){var n=getRegexOrder(t,e.name),o=getRegexOrder(t,r.name);return n&&!o?-1:o&&!n?1:n&&o?n<o?-1:1:!n&&!o||n&&o&&n===o?e.name<r.name?-1:1:void 0}))}}}function getRegexOrder(t,e){for(var r=null,n=0;n<t.length;n++)if(t[n].test(e)){r=n+1;break}return r}function RegexRenameOperator(t){return{name:"Regex Rename Operator",func:function(e){return e.map((function(e){var r,n=___createForOfIteratorHelper_37(t);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=o.expr,i=o.now;e.name=e.name.replace(buildRegex(a,"g"),i).trim()}}catch(s){n.e(s)}finally{n.f()}return e}))}}}function RegexDeleteOperator(t){return{name:"Regex Delete Operator",func:RegexRenameOperator(t.map((function(t){return{expr:t,now:""}}))).func}}function ScriptOperator(script,targetPlatform,$arguments){return{name:"Script Operator",func:function func(proxies){var output=proxies;return function(){var $get=function(t,e){return(0,PROXY_PROCESSORS[t])(e)},$process=ApplyProcessor;eval(script),output=operator(proxies,targetPlatform)}(),output}}}function UselessFilter(){return{name:"Useless Filter",func:RegexFilter({regex:["\u7f51\u5740","\u6d41\u91cf","\u65f6\u95f4","\u5e94\u6025","\u8fc7\u671f","Bandwidth","expire"],keep:!1}).func}}function RegionFilter(t){var e={HK:"\ud83c\udded\ud83c\uddf0",TW:"\ud83c\uddf9\ud83c\uddfc",US:"\ud83c\uddfa\ud83c\uddf8",SG:"\ud83c\uddf8\ud83c\uddec",JP:"\ud83c\uddef\ud83c\uddf5",UK:"\ud83c\uddec\ud83c\udde7"};return{name:"Region Filter",func:function(r){return r.map((function(r){var n=(0,_$geo_47.getFlag)(r.name);return t.some((function(t){return e[t]===n}))}))}}}function RegexFilter(t){var e=t.regex,r=void 0===e?[]:e,n=t.keep,o=void 0===n||n;return{name:"Regex Filter",func:function(t){return t.map((function(t){var e=r.some((function(e){return buildRegex(e).test(t.name)}));return o?e:!e}))}}}function buildRegex(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r=r.join(""),t.startsWith("(?i)")?(t=t.substr(4),new RegExp(t,"i"+r)):new RegExp(t,r)}function TypeFilter(t){return{name:"Type Filter",func:function(e){return e.map((function(e){return t.some((function(t){return e.type===t}))}))}}}function ScriptFilter(script,targetPlatform,$arguments){return{name:"Script Filter",func:function func(proxies){var output=(0,_$logical_50.FULL)(proxies.length,!0);return function(){eval(script),output=filter(proxies,targetPlatform)}(),output}}}return{"Useless Filter":UselessFilter,"Region Filter":RegionFilter,"Regex Filter":RegexFilter,"Type Filter":TypeFilter,"Script Filter":ScriptFilter,"Set Property Operator":SetPropertyOperator,"Flag Operator":FlagOperator,"Sort Operator":SortOperator,"Regex Sort Operator":RegexSortOperator,"Regex Rename Operator":RegexRenameOperator,"Regex Delete Operator":RegexDeleteOperator,"Script Operator":ScriptOperator,"Handle Duplicate Operator":HandleDuplicateOperator}}(),PROXY_PRODUCERS={QX:{produce:function(t){var e,r;switch(t.type){case"ss":if(e="","obfs"===t.plugin){var n=t["plugin-opts"],o=n.host,a=n.mode;e=",obfs=".concat(a).concat(o?",obfs-host="+o:"")}if("v2ray-plugin"===t.plugin){var i=t["plugin-opts"],s=i.tls,c=i.host,u=i.path;e=",obfs=".concat(s?"wss":"ws").concat(c?",obfs-host="+c:"").concat(u?",obfs-uri="+u:"")}return"shadowsocks=".concat(t.server,":").concat(t.port,",method=").concat(t.cipher,",password=").concat(t.password).concat(e).concat(t.tfo?",fast-open=true":",fast-open=false").concat(t.udp?",udp-relay=true":",udp-relay=false",",tag=").concat(t.name);case"ssr":return"shadowsocks=".concat(t.server,":").concat(t.port,",method=").concat(t.cipher,",password=").concat(t.password,",ssr-protocol=").concat(t.protocol).concat(t["protocol-param"]?",ssr-protocol-param="+t["protocol-param"]:"").concat(t.obfs?",obfs="+t.obfs:"").concat(t["obfs-param"]?",obfs-host="+t["obfs-param"]:"",",fast-open=").concat(t.tfo||!1).concat(t.udp?",udp-relay=true":",udp-relay=false",",tag=").concat(t.name);case"vmess":e="","ws"===t.network?e=t.tls?",obfs=wss".concat(t.sni?",obfs-host="+t.sni:"").concat(t["ws-opts"].path?",obfs-uri="+t["ws-opts"].path:"",",tls-verification=").concat(t["skip-cert-verify"]?"false":"true"):",obfs=ws".concat(t["ws-opts"].headers.Host?",obfs-host="+t["ws-opts"].headers.Host:"").concat(t["ws-opts"].path?",obfs-uri="+t["ws-opts"].path:""):t.tls&&(e=",obfs=over-tls".concat(t.sni?",obfs-host="+t.sni:"",",tls-verification=").concat(t["skip-cert-verify"]?"false":"true"));var p="vmess=".concat(t.server,":").concat(t.port,",method=").concat("auto"===t.cipher?"none":t.cipher,",password=").concat(t.uuid).concat(e,",fast-open=").concat(t.tfo||!1).concat(t.udp?",udp-relay=true":",udp-relay=false");return 0===t.alterId&&(t["vmess-aead"]=!0),void 0!==t["vmess-aead"]&&(p+=",aead=".concat(t["vmess-aead"])),p+",tag=".concat(t.name);case"trojan":return"trojan=".concat(t.server,":").concat(t.port,",password=").concat(t.password).concat(t.sni?",tls-host="+t.sni:"",",over-tls=true,tls-verification=").concat(t["skip-cert-verify"]?"false":"true",",fast-open=").concat(t.tfo||!1).concat(t.udp?",udp-relay=true":",udp-relay=false",",tag=").concat(t.name);case"http":return r="",t.tls&&(r=",over-tls=true,tls-verification=".concat(t["skip-cert-verify"]?"false":"true").concat(t.sni?",tls-host="+t.sni:"")),"http=".concat(t.server,":").concat(t.port,",username=").concat(t.username,",password=").concat(t.password).concat(r,",fast-open=").concat(t.tfo||!1,",tag=").concat(t.name)}throw new Error("Platform ".concat("QX"," does not support proxy type: ").concat(t.type))}},Surge:{produce:function(t){var e,r,n="";switch(t.type){case"ss":if(e="",t.plugin){var o=t["plugin-opts"],a=o.host,i=o.mode;if("obfs"!==t.plugin)throw new Error("Platform ".concat("Surge"," does not support obfs option: ").concat(t.obfs));e=",obfs=".concat(i).concat(a?",obfs-host="+a:"")}n="".concat(t.name,"=ss,").concat(t.server,", ").concat(t.port,",encrypt-method=").concat(t.cipher,",password=").concat(t.password).concat(e,",tfo=").concat(t.tfo||"false",",udp-relay=").concat(t.udp||"false");break;case"vmess":if(r="",n="".concat(t.name,"=vmess,").concat(t.server,",").concat(t.port,",username=").concat(t.uuid,",tls=").concat(t.tls||"false",",tfo=").concat(t.tfo||"false"),0===t.alterId&&(t["vmess-aead"]=!0),void 0!==t["vmess-aead"]&&(n+=",vmess-aead=".concat(t["vmess-aead"])),"ws"===t.network){var s=t["ws-opts"].path||"/",c=Object.entries(t["ws-opts"].headers).map((function(t){var e=_slicedToArray(t,2),r=e[0],n=e[1];return"".concat(r,':"').concat(n,'"')})).join("|");n+=",ws=true".concat(s?",ws-path="+s:"").concat(c?",ws-headers="+c:"")}t.tls&&(n+="".concat(void 0!==t["skip-cert-verify"]?",skip-cert-verify="+t["skip-cert-verify"]:""),n+=t.sni?",sni=".concat(t.sni):"");break;case"trojan":n="".concat(t.name,"=trojan,").concat(t.server,",").concat(t.port,",password=").concat(t.password).concat(void 0!==t["skip-cert-verify"]?",skip-cert-verify="+t["skip-cert-verify"]:"").concat(t.sni?",sni="+t.sni:"",",tfo=").concat(t.tfo||"false",",udp-relay=").concat(t.udp||"false");break;case"http":t.tls&&(r=",skip-cert-verify=".concat(t["skip-cert-verify"],",sni=").concat(t.sni)),n="".concat(t.name,"=").concat(t.tls?"https":"http",",").concat(t.server,",").concat(t.port).concat(t.username?",username="+t.username:"").concat(t.password?",password="+t.password:"").concat(r,",tfo=").concat(t.tfo||"false");break;default:throw new Error("Platform ".concat("Surge"," does not support proxy type: ").concat(t.type))}return n+(void 0!==t["surge-hybrid"]?",hybrid=".concat(t["surge-hybrid"]):"")}},Loon:{produce:function(t){var e,r="",n="";switch(void 0!==t.udp&&(n=t.udp?",udp=true":",udp=false"),e=",fast-open=".concat(t.tfo||!1),t.type){case"ss":if(r=",,",t.plugin){if("obfs"!==t.plugin)throw new Error("Platform ".concat("Loon"," does not support obfs option: ").concat(t.obfs));var o=t["plugin-opts"],a=o.mode,i=o.host;r=",".concat(a,",").concat(i||"")}return"".concat(t.name,"=shadowsocks,").concat(t.server,",").concat(t.port,",").concat(t.cipher,',"').concat(t.password,'"').concat(r).concat(n).concat(e);case"ssr":return"".concat(t.name,"=shadowsocksr,").concat(t.server,",").concat(t.port,",").concat(t.cipher,',"').concat(t.password,'",').concat(t.protocol,",{").concat(t["protocol-param"]||"","},").concat(t.obfs,",{").concat(t["obfs-param"]||"","}").concat(n).concat(e);case"vmess":if(r="","ws"===t.network){var s=t["ws-opts"].headers.Host||t.server;r=",transport:ws,host:".concat(s,",path:").concat(t["ws-opts"].path||"/")}else r=",transport:tcp";t.tls&&(r+="".concat(t.sni?",tls-name:"+t.sni:"",",skip-cert-verify:").concat(t["skip-cert-verify"]||"false"));var c="".concat(t.name,"=vmess,").concat(t.server,",").concat(t.port,",").concat("auto"===t.cipher?"none":t.cipher,',"').concat(t.uuid,'",over-tls:').concat(t.tls||"false").concat(r);return 0===t.alterId&&(t["vmess-aead"]=!0),void 0!==t["vmess-aead"]&&(c+=",vmess-aead=".concat(t["vmess-aead"])),c;case"trojan":return"".concat(t.name,"=trojan,").concat(t.server,",").concat(t.port,',"').concat(t.password,'"').concat(t.sni?",tls-name:"+t.sni:"",",skip-cert-verify:").concat(t["skip-cert-verify"]||"false").concat(n);case"http":var u="".concat(t.name,"=").concat(t.tls?"http":"https",",").concat(t.server,",").concat(t.port,",").concat(t.username||"",",").concat(t.password||"");return t.tls?u+"".concat(t.sni?",tls-name:"+t.sni:"",",skip-cert-verify:").concat(t["skip-cert-verify"]):u}throw new Error("Platform ".concat("Loon"," does not support proxy type: ").concat(t.type))}},Clash:{type:"ALL",produce:function(t){return"proxies:\n"+t.map((function(t){return delete t.supported,"  - "+JSON.stringify(t)+"\n"})).join("")}},URI:{type:"SINGLE",produce:function(t){var e="";switch(t.type){case"ss":var r="".concat(t.cipher,":").concat(t.password);if(e="ss://".concat(_$base64_4.Base64.encode(r),"@").concat(t.server,":").concat(t.port,"/"),t.plugin){e+="?plugin=";var n=t["plugin-opts"];switch(t.plugin){case"obfs":e+=encodeURIComponent("simple-obfs;obfs=".concat(n.mode).concat(n.host?";obfs-host="+n.host:""));break;case"v2ray-plugin":e+=encodeURIComponent("v2ray-plugin;obfs=".concat(n.mode).concat(n.host?";obfs-host"+n.host:"").concat(n.tls?";tls":""));break;default:throw new Error("Unsupported plugin option: ".concat(t.plugin))}}e+="#".concat(encodeURIComponent(t.name));break;case"ssr":e="".concat(t.server,":").concat(t.port,":").concat(t.protocol,":").concat(t.cipher,":").concat(t.obfs,":").concat(_$base64_4.Base64.encode(t.password),"/"),e+="?remarks=".concat(_$base64_4.Base64.encode(t.name)).concat(t["obfs-param"]?"&obfsparam="+_$base64_4.Base64.encode(t["obfs-param"]):"").concat(t["protocol-param"]?"&protocolparam="+_$base64_4.Base64.encode(t["protocol-param"]):""),e="ssr://"+_$base64_4.Base64.encode(e);break;case"vmess":e={ps:t.name,add:t.server,port:t.port,id:t.uuid,type:"",aid:0,net:t.network||"tcp",tls:t.tls?"tls":""},"ws"===t.network&&(e.path=t["ws-opts"].path||"/",e.host=t["ws-opts"].headers.Host||t.server),e="vmess://"+_$base64_4.Base64.encode(JSON.stringify(e));break;case"trojan":e="trojan://".concat(t.password,"@").concat(t.server,":").concat(t.port,"#").concat(encodeURIComponent(t.name));break;default:throw new Error("Cannot handle proxy type: ".concat(t.type))}return e}},JSON:{type:"ALL",produce:function(t){return JSON.stringify(t,null,2)}}},ProxyUtils=function(){function t(t,e){var r;try{r=t.test(e)}catch(n){r=!1}return r}function e(){return(e=___asyncToGenerator_37(___regeneratorRuntime_37().mark((function t(e){var r,n,o,a,i,s,c,u,p,f,l,_,h,d,y,v,m,g,w=arguments;return ___regeneratorRuntime_37().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=w.length>1&&void 0!==w[1]?w[1]:[],n=w.length>2?w[2]:void 0,o=___createForOfIteratorHelper_37(r),t.prev=3,o.s();case 5:if((a=o.n()).done){t.next=38;break}if(i=a.value,s=void 0,c={},-1===i.type.indexOf("Script")){t.next=29;break}if(u=i.args,p=u.mode,f=u.content,"link"!==p){t.next=28;break}if((_=(l=f).split("#")).length>1){h=___createForOfIteratorHelper_37(_[1].split("&"));try{for(h.s();!(d=h.n()).done;)y=d.value,v=y.split("=")[0],m=y.split("=")[1]||!0,c[v]=m}catch(b){h.e(b)}finally{h.f()}}return t.prev=15,t.next=18,(0,___download_37.default)(l.split("#")[0]);case 18:s=t.sent,_app.default.info("Script loaded: >>>\n ".concat(s)),t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(15),_app.default.error("Error when downloading remote script: ".concat(i.args.content,".\n Reason: ").concat(t.t0)),t.abrupt("continue",36);case 26:t.next=29;break;case 28:s=f;case 29:if(PROXY_PROCESSORS[i.type]){t.next=32;break}return _app.default.error('Unknown operator: "'.concat(i.type,'"')),t.abrupt("continue",36);case 32:_app.default.info('Applying "'.concat(i.type,'" with arguments:\n >>> ').concat(JSON.stringify(i.args,null,2)||"None")),g=void 0,g=-1!==i.type.indexOf("Script")?PROXY_PROCESSORS[i.type](s,n,c):PROXY_PROCESSORS[i.type](i.args),e=ApplyProcessor(g,e);case 36:t.next=5;break;case 38:t.next=43;break;case 40:t.prev=40,t.t1=t.catch(3),o.e(t.t1);case 43:return t.prev=43,o.f(),t.finish(43);case 46:return t.abrupt("return",e);case 47:case"end":return t.stop()}}),t,null,[[3,40,43,46],[15,22]])})))).apply(this,arguments)}return{parse:function(e){e=function(t){var e,r=___createForOfIteratorHelper_37(PROXY_PREPROCESSORS);try{for(r.s();!(e=r.n()).done;){var n=e.value;try{if(n.test(t))return _app.default.info("Pre-processor [".concat(n.name,"] activated")),n.parse(t)}catch(o){_app.default.error("Parser [".concat(n.name,"] failed\n Reason: ").concat(o))}}}catch(a){r.e(a)}finally{r.f()}return t}(e);var r,n,o=[],a=___createForOfIteratorHelper_37(e.split("\n"));try{for(a.s();!(n=a.n()).done;){var i=n.value;if(0!==(i=i.trim()).length){var s=r&&t(r,i);if(!s){var c,u=___createForOfIteratorHelper_37(PROXY_PARSERS);try{for(u.s();!(c=u.n()).done;){var p=c.value;if(t(p,i)){r=p,s=!0,_app.default.info("Proxy parser: ".concat(p.name," is activated"));break}}}catch(l){u.e(l)}finally{u.f()}}if(s)try{var f=r.parse(i);f||_app.default.error("Parser ".concat(r.name," return nothing for \n").concat(i,"\n")),o.push(f)}catch(l){_app.default.error("Failed to parse line: \n ".concat(i,"\n Reason: ").concat(l.stack))}else _app.default.error("Failed to find a rule to parse line: \n".concat(i,"\n"))}}}catch(l){a.e(l)}finally{a.f()}return o},process:function(t){return e.apply(this,arguments)},produce:function(t,e){var r=PROXY_PRODUCERS[e];if(!r)throw new Error("Target platform: ".concat(e," is not supported!"));return t=t.filter((function(t){return!(t.supported&&!1===t.supported[e])})),_app.default.info("Producing proxies for target: ".concat(e)),void 0===r.type||"SINGLE"===r.type?t.map((function(t){try{return r.produce(t)}catch(e){return _app.default.error("Cannot produce proxy: ".concat(JSON.stringify(t,null,2),"\nReason: ").concat(e)),""}})).filter((function(t){return t.length>0})).join("\n"):"ALL"===r.type?r.produce(t):void 0}}}(),keys;function ApplyProcessor(t,e){return-1!==t.name.indexOf("Filter")?function(t,e){var r=(0,_$logical_50.FULL)(e.length,!0);try{r=(0,_$logical_50.AND)(r,t.func(e))}catch(n){console.log("Cannot apply filter ".concat(t.name,"\n Reason: ").concat(n))}return e.filter((function(t,e){return r[e]}))}(t,e):-1!==t.name.indexOf("Operator")?function(t,e){var r=clone(e);try{var n=t.func(r);n&&(r=n)}catch(o){console.log("Cannot apply operator ".concat(t.name,"! Reason: ").concat(o))}return r}(t,e):void 0}function shuffle(t){for(var e,r,n=t.length;0!==n;)r=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[r],t[r]=e;return t}function clone(t){return JSON.parse(JSON.stringify(t))}function removeFlag(t){return t.replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/g,"").trim()}_$proxyUtils_37.ProxyUtils=ProxyUtils;var _$ruleUtils_38={};function ___typeof_38(t){return(___typeof_38="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_$ruleUtils_38,"__esModule",{value:!0}),_$ruleUtils_38.RuleUtils=void 0;var ___staticJsYaml_38=___interopRequireDefault_38(_$staticJsYaml_35),___app_38=___interopRequireDefault_38(_$app_36);function ___interopRequireDefault_38(t){return t&&t.__esModule?t:{default:t}}function ___regeneratorRuntime_38(){___regeneratorRuntime_38=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_38(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __asyncGeneratorStep_38(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function ___createForOfIteratorHelper_38(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ___arrayLikeToArray_38(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_38(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function ___arrayLikeToArray_38(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var RULE_TYPES_MAPPING=[[/^(DOMAIN|host|HOST)$/,"DOMAIN"],[/^(DOMAIN-KEYWORD|host-keyword|HOST-KEYWORD)$/,"DOMAIN-KEYWORD"],[/^(DOMAIN-SUFFIX|host-suffix|HOST-SUFFIX)$/,"DOMAIN-SUFFIX"],[/^USER-AGENT$/i,"USER-AGENT"],[/^PROCESS-NAME$/,"PROCESS-NAME"],[/^(DEST-PORT|DST-PORT)$/,"DST-PORT"],[/^SRC-IP(-CIDR)?$/,"SRC-IP"],[/^(IN|SRC)-PORT$/,"IN-PORT"],[/^PROTOCOL$/,"PROTOCOL"],[/^IP-CIDR$/i,"IP-CIDR"],[/^(IP-CIDR6|ip6-cidr|IP6-CIDR)$/]],RULE_PREPROCESSORS=[{name:"HTML",test:function(t){return/^<!DOCTYPE html>/.test(t)},parse:function(){return""}},{name:"Clash Provider",test:function(t){return 0===t.indexOf("payload:")},parse:function(t){return t.replace("payload:","").replace(/^\s*-\s*/gm,"")}}],RULE_PARSERS=[{name:"Universal Rule Parser",test:function(){return!0},parse:function(t){var e,r=[],n=___createForOfIteratorHelper_38(t.split("\n"));try{for(n.s();!(e=n.n()).done;){var o=e.value;if(0!==(o=o.trim()).length&&!/\s*#/.test(o))try{var a,i=o.split(",").map((function(t){return t.trim()})),s=i[0],c=!1,u=___createForOfIteratorHelper_38(RULE_TYPES_MAPPING);try{for(u.s();!(a=u.n()).done;){var p=a.value;if(p[0].test(s)){c=!0;var f={type:p[1],content:i[1]};"IP-CIDR"!==f.type&&"IP-CIDR6"!==f.type||(f.options=i.slice(2)),r.push(f)}}}catch(l){u.e(l)}finally{u.f()}if(!c)throw new Error("Invalid rule type: "+s)}catch(_){console.error("Failed to parse line: ".concat(o,"\n Reason: ").concat(_))}}}catch(l){n.e(l)}finally{n.f()}return r}}],RULE_PROCESSORS={"Regex Filter":function(t){var e=t.regex,r=void 0===e?[]:e,n=t.keep,o=void 0===n||n;return{name:"Regex Filter",func:function(t){return t.map((function(t){var e=r.some((function(e){return(e=new RegExp(e)).test(t)}));return o?e:!e}))}}},"Remove Duplicate Filter":function(){return{name:"Remove Duplicate Filter",func:function(t){var e=new Set,r=[];return t.forEach((function(t){var n=t.options||[];n.sort();var o="".concat(t.type,",").concat(t.content,",").concat(JSON.stringify(n));e.has(o)||(r.push(t),e.add(o))})),r}}},"Type Filter":function(t){return{name:"Type Filter",func:function(e){return e.map((function(e){return t.some((function(t){return e.type===t}))}))}}},"Regex Replace Operator":function(t){return{name:"Regex Rename Operator",func:function(e){return e.map((function(e){var r,n=___createForOfIteratorHelper_38(t);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=o.expr,i=o.now;e.content=e.content.replace(new RegExp(a,"g"),i).trim()}}catch(s){n.e(s)}finally{n.f()}return e}))}}}},RULE_PRODUCERS={QX:{type:"SINGLE",func:function(t){return-1!==["URL-REGEX","DEST-PORT","SRC-IP","IN-PORT","PROTOCOL"].indexOf(t.type)?null:"".concat({"DOMAIN-KEYWORD":"HOST-KEYWORD","DOMAIN-SUFFIX":"HOST-SUFFIX",DOMAIN:"HOST","IP-CIDR6":"IP6-CIDR"}[t.type]||t.type,",").concat(t.content,",SUB-STORE")}},Surge:{type:"SINGLE",func:function(t){var e="".concat(t.type,",").concat(t.content);return"IP-CIDR"!==t.type&&"IP-CIDR6"!==t.type||(e+=t.options?",".concat(t.options[0]):""),e}},Loon:{type:"SINGLE",func:function(t){return-1!==["DEST-PORT","SRC-IP","IN-PORT","PROTOCOL"].indexOf(t.type)?null:function(t){var e="".concat(t.type,",").concat(t.content);return"IP-CIDR"!==t.type&&"IP-CIDR6"!==t.type||(e+=t.options?",".concat(t.options[0]):""),e}(t)}},Clash:{type:"ALL",func:function(t){var e={"DEST-PORT":"DST-PORT","SRC-IP":"SRC-IP-CIDR","IN-PORT":"SRC-PORT"},r={payload:t.map((function(t){var r="".concat(e[t.type]||t.type,",").concat(t.content);return"IP-CIDR"!==t.type&&"IP-CIDR6"!==t.type||(r+=t.options?",".concat(t.options[0]):""),r}))};return ___staticJsYaml_38.default.dump(r)}}},RuleUtils=function(){function t(){var e;return e=___regeneratorRuntime_38().mark((function t(e,r){var n,o,a,i;return ___regeneratorRuntime_38().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=___createForOfIteratorHelper_38(r),t.prev=1,n.s();case 3:if((o=n.n()).done){t.next=13;break}if(a=o.value,RULE_PROCESSORS[a.type]){t.next=8;break}return console.error("Unknown operator: ".concat(a.type,"!")),t.abrupt("continue",11);case 8:i=RULE_PROCESSORS[a.type](a.args),___app_38.default.info('Applying "'.concat(a.type,'" with arguments: \n >>> ').concat(JSON.stringify(a.args)||"None")),e=(0,_$proxyUtils_37.ApplyProcessor)(i,e);case 11:t.next=3;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n.e(t.t0);case 18:return t.prev=18,n.f(),t.finish(18);case 21:return t.abrupt("return",e);case 22:case"end":return t.stop()}}),t,null,[[1,15,18,21]])})),(t=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(t){__asyncGeneratorStep_38(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_38(a,n,o,i,s,"throw",t)}i(void 0)}))}).apply(this,arguments)}return{parse:function(t){t=function(t){var e,r=___createForOfIteratorHelper_38(RULE_PREPROCESSORS);try{for(r.s();!(e=r.n()).done;){var n=e.value;try{if(n.test(t))return ___app_38.default.info("Pre-processor [".concat(n.name,"] activated")),n.parse(t)}catch(o){___app_38.default.error("Parser [".concat(n.name,"] failed\n Reason: ").concat(o))}}}catch(a){r.e(a)}finally{r.f()}return t}(t);var e,r=___createForOfIteratorHelper_38(RULE_PARSERS);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=void 0;try{o=n.test(t)}catch(a){o=!1}if(o)return ___app_38.default.info("Rule parser [".concat(n.name,"] is activated!")),n.parse(t)}}catch(a){r.e(a)}finally{r.f()}},process:function(e,r){return t.apply(this,arguments)},produce:function(t,e){var r=RULE_PRODUCERS[e];if(!r)throw new Error("Target platform: ".concat(e," is not supported!"));return void 0===r.type||"SINGLE"===r.type?t.map((function(t){try{return r.func(t)}catch(e){return console.log("ERROR: cannot produce rule: ".concat(JSON.stringify(t),"\nReason: ").concat(e)),""}})).filter((function(t){return t.length>0})).join("\n"):"ALL"===r.type?r.func(t):void 0}}}();_$ruleUtils_38.RuleUtils=RuleUtils;var _$artifacts_40={};function ___typeof_40(t){return(___typeof_40="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_$artifacts_40,"__esModule",{value:!0}),_$artifacts_40.default=function(t){___app_40.default.read(_$constants_42.ARTIFACTS_KEY)||___app_40.default.write({},_$constants_42.ARTIFACTS_KEY),t.route("/api/artifacts").get(getAllArtifacts).post(createArtifact),t.route("/api/artifact/:name").get(getArtifact).patch(updateArtifact).delete(deleteArtifact),t.get("/api/cron/sync-artifacts",cronSyncArtifacts)},_$artifacts_40.produceArtifact=produceArtifact;var ___download_40=___interopRequireDefault_40(_$download_46),_gist=___interopRequireDefault_40(_$gist_48),___app_40=___interopRequireDefault_40(_$app_36);function ___interopRequireDefault_40(t){return t&&t.__esModule?t:{default:t}}function ___createForOfIteratorHelper_40(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ___arrayLikeToArray_40(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_40(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function ___arrayLikeToArray_40(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ___regeneratorRuntime_40(){___regeneratorRuntime_40=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_40(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __ownKeys_40(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_40(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?__ownKeys_40(Object(r),!0).forEach((function(e){___defineProperty_40(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__ownKeys_40(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ___defineProperty_40(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function __asyncGeneratorStep_40(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function ___asyncToGenerator_40(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_40(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_40(a,n,o,i,s,"throw",t)}i(void 0)}))}}function getArtifact(t,e){return _getArtifact.apply(this,arguments)}function _getArtifact(){return(_getArtifact=___asyncToGenerator_40(___regeneratorRuntime_40().mark((function t(e,r){var n,o,a,i,s,c,u,p;return ___regeneratorRuntime_40().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.params.name,n=decodeURIComponent(n),o=e.query.action,a=___app_40.default.read(_$constants_42.ARTIFACTS_KEY),!(i=a[n])){t.next=45;break}if(!o){t.next=42;break}t.t0=i.type,t.next="subscription"===t.t0?10:"collection"===t.t0?12:"rule"===t.t0?14:16;break;case 10:return s=___app_40.default.read(_$constants_42.SUBS_KEY)[i.source],t.abrupt("break",16);case 12:return s=___app_40.default.read(_$constants_42.COLLECTIONS_KEY)[i.source],t.abrupt("break",16);case 14:return s=___app_40.default.read(_$constants_42.RULES_KEY)[i.source],t.abrupt("break",16);case 16:return t.next=18,produceArtifact({type:i.type,item:s,platform:i.platform});case 18:if(c=t.sent,"preview"!==o){t.next=23;break}r.send(c),t.next=40;break;case 23:if("sync"!==o){t.next=40;break}return ___app_40.default.info("\u6b63\u5728\u4e0a\u4f20\u914d\u7f6e\uff1a".concat(i.name,"\n>>>")),console.log(JSON.stringify(i,null,2)),t.prev=26,t.next=29,syncArtifact(___defineProperty_40({},encodeURIComponent(i.name),{content:c}));case 29:u=t.sent,i.updated=(new Date).getTime(),p=JSON.parse(u.body),i.url=p.files[encodeURIComponent(i.name)].raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1"),___app_40.default.write(a,_$constants_42.ARTIFACTS_KEY),r.json({status:"success"}),t.next=40;break;case 37:t.prev=37,t.t1=t.catch(26),r.status(500).json({status:"failed",message:t.t1});case 40:t.next=43;break;case 42:r.json({status:"success",data:i});case 43:t.next=46;break;case 45:r.status(404).json({status:"failed",message:"\u672a\u627e\u5230\u5bf9\u5e94\u7684\u914d\u7f6e\uff01"});case 46:case"end":return t.stop()}}),t,null,[[26,37]])})))).apply(this,arguments)}function createArtifact(t,e){var r=t.body;___app_40.default.info("\u6b63\u5728\u521b\u5efa\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(r.name));var n=___app_40.default.read(_$constants_42.ARTIFACTS_KEY);n[r.name]?e.status(500).json({status:"failed",message:"\u8fdc\u7a0b\u914d\u7f6e".concat(r.name,"\u5df2\u5b58\u5728\uff01")}):(n[r.name]=r,___app_40.default.write(n,_$constants_42.ARTIFACTS_KEY),e.status(201).json({status:"success",data:r}))}function updateArtifact(t,e){var r=___app_40.default.read(_$constants_42.ARTIFACTS_KEY),n=t.params.name,o=r[n=decodeURIComponent(n)];if(o){___app_40.default.info("\u6b63\u5728\u66f4\u65b0\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(o.name));var a=t.body;if(void 0===a.name||/^[\w-_.]*$/.test(a.name)){var i=___objectSpread_40(___objectSpread_40({},o),a);r[i.name]=i,i.name!==n&&delete r[n],___app_40.default.write(r,_$constants_42.ARTIFACTS_KEY),e.json({status:"success",data:i})}else e.status(500).json({status:"failed",message:"\u8fdc\u7a0b\u914d\u7f6e\u540d\u79f0 ".concat(a.name," \u4e2d\u542b\u6709\u975e\u6cd5\u5b57\u7b26\uff01\u540d\u79f0\u4e2d\u53ea\u80fd\u5305\u542b\u82f1\u6587\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3001\u6a2a\u6760\u3002")})}else e.status(404).json({status:"failed",message:"\u672a\u627e\u5230\u5bf9\u5e94\u7684\u8fdc\u7a0b\u914d\u7f6e\uff01"})}function cronSyncArtifacts(t,e){return _cronSyncArtifacts.apply(this,arguments)}function _cronSyncArtifacts(){return(_cronSyncArtifacts=___asyncToGenerator_40(___regeneratorRuntime_40().mark((function t(e,r){var n,o,a,i,s,c,u;return ___regeneratorRuntime_40().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ___app_40.default.info("\u5f00\u59cb\u540c\u6b65\u6240\u6709\u8fdc\u7a0b\u914d\u7f6e..."),n=___app_40.default.read(_$constants_42.ARTIFACTS_KEY),o={},t.prev=3,t.next=6,Promise.all(Object.values(n).map(function(){var t=___asyncToGenerator_40(___regeneratorRuntime_40().mark((function t(e){var r,n;return ___regeneratorRuntime_40().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.sync){t.next=15;break}___app_40.default.info("\u6b63\u5728\u540c\u6b65\u4e91\u914d\u7f6e\uff1a".concat(e.name,"...")),t.t0=e.type,t.next="subscription"===t.t0?5:"collection"===t.t0?7:"rule"===t.t0?9:11;break;case 5:return r=___app_40.default.read(_$constants_42.SUBS_KEY)[e.source],t.abrupt("break",11);case 7:return r=___app_40.default.read(_$constants_42.COLLECTIONS_KEY)[e.source],t.abrupt("break",11);case 9:return r=___app_40.default.read(_$constants_42.RULES_KEY)[e.source],t.abrupt("break",11);case 11:return t.next=13,produceArtifact({type:e.type,item:r,platform:e.platform});case 13:n=t.sent,o[e.name]={content:n};case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return t.next=8,syncArtifact(o);case 8:for(a=t.sent,i=JSON.parse(a.body),s=0,c=Object.values(n);s<c.length;s++)(u=c[s]).updated=(new Date).getTime(),u.url=i.files[u.name].raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");___app_40.default.write(n,_$constants_42.ARTIFACTS_KEY),___app_40.default.info("\u5168\u90e8\u8ba2\u9605\u540c\u6b65\u6210\u529f\uff01"),r.status(200).end(),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(3),r.status(500).json({error:t.t0}),___app_40.default.info("\u540c\u6b65\u8ba2\u9605\u5931\u8d25\uff0c\u539f\u56e0\uff1a".concat(t.t0));case 20:case"end":return t.stop()}}),t,null,[[3,16]])})))).apply(this,arguments)}function deleteArtifact(t,e){return _deleteArtifact.apply(this,arguments)}function _deleteArtifact(){return(_deleteArtifact=___asyncToGenerator_40(___regeneratorRuntime_40().mark((function t(e,r){var n,o,a,i;return ___regeneratorRuntime_40().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.params.name,n=decodeURIComponent(n),___app_40.default.info("\u6b63\u5728\u5220\u9664\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n)),o=___app_40.default.read(_$constants_42.ARTIFACTS_KEY),t.prev=4,a=o[n]){t.next=8;break}throw new Error("\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n,"\u4e0d\u5b58\u5728\uff01"));case 8:if(!a.updated){t.next=13;break}return(i={})[encodeURIComponent(a.name)]={content:""},t.next=13,syncArtifact(i);case 13:delete o[n],___app_40.default.write(o,_$constants_42.ARTIFACTS_KEY),r.json({status:"success"}),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(4),___app_40.default.error("\u65e0\u6cd5\u5220\u9664\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n,"\uff0c\u539f\u56e0\uff1a").concat(t.t0)),r.status(500).json({status:"failed",message:"\u65e0\u6cd5\u5220\u9664\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n,", \u539f\u56e0\uff1a").concat(t.t0)});case 22:case"end":return t.stop()}}),t,null,[[4,18]])})))).apply(this,arguments)}function getAllArtifacts(t,e){var r=___app_40.default.read(_$constants_42.ARTIFACTS_KEY);e.json({status:"success",data:r})}function syncArtifact(t){return _syncArtifact.apply(this,arguments)}function _syncArtifact(){return(_syncArtifact=___asyncToGenerator_40(___regeneratorRuntime_40().mark((function t(e){var r,n,o;return ___regeneratorRuntime_40().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=___app_40.default.read(_$constants_42.SETTINGS_KEY),n=r.gistToken){t.next=3;break}return t.abrupt("return",Promise.reject("\u672a\u8bbe\u7f6eGist Token\uff01"));case 3:return o=new _gist.default({token:n,key:_$constants_42.ARTIFACT_REPOSITORY_KEY}),t.abrupt("return",o.upload(e));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function produceArtifact(t){return _produceArtifact.apply(this,arguments)}function _produceArtifact(){return(_produceArtifact=___asyncToGenerator_40(___regeneratorRuntime_40().mark((function t(e){var r,n,o,a,i,s,c,u,p,f,l,_,h,d,y,v,m,g,w,b,E,S,O,A,x,L,T,R;return ___regeneratorRuntime_40().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.type,n=e.item,o=e.platform,a=e.noProcessor,o=o||"JSON",a=a||!1,"subscription"!==r){t.next=40;break}if("local"!==(i=n).source){t.next=9;break}s=i.content,t.next=12;break;case 9:return t.next=11,(0,___download_40.default)(i.url,i.ua);case 11:s=t.sent;case 12:if(c=_$proxyUtils_37.ProxyUtils.parse(s),a){t.next=17;break}return t.next=16,_$proxyUtils_37.ProxyUtils.process(c,i.process||[],o);case 16:c=t.sent;case 17:u={},p=___createForOfIteratorHelper_40(c),t.prev=19,p.s();case 21:if((f=p.n()).done){t.next=29;break}if(l=f.value,!u[l.name]){t.next=26;break}return ___app_40.default.notify("\ud83c\udf0d \u300e \ud835\udc7a\ud835\udc96\ud835\udc83-\ud835\udc7a\ud835\udc95\ud835\udc90\ud835\udc93\ud835\udc86 \u300f","\u26a0\ufe0f \u8ba2\u9605\u5305\u542b\u91cd\u590d\u8282\u70b9\uff01","\u8bf7\u4ed4\u7ec6\u68c0\u6d4b\u914d\u7f6e\uff01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"}),t.abrupt("break",29);case 26:u[l.name]=!0;case 27:t.next=21;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t.catch(19),p.e(t.t0);case 34:return t.prev=34,p.f(),t.finish(34);case 37:return t.abrupt("return",_$proxyUtils_37.ProxyUtils.produce(c,o));case 40:if("collection"!==r){t.next=78;break}return _=___app_40.default.read(_$constants_42.SUBS_KEY),d=(h=n).subscriptions,y={},v=0,t.next=48,Promise.all(d.map(function(){var t=___asyncToGenerator_40(___regeneratorRuntime_40().mark((function t(e){var r,n,i;return ___regeneratorRuntime_40().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=_[e],t.prev=1,___app_40.default.info("\u6b63\u5728\u5904\u7406\u5b50\u8ba2\u9605\uff1a".concat(r.name,"...")),"local"!==r.source){t.next=7;break}n=r.content,t.next=10;break;case 7:return t.next=9,(0,___download_40.default)(r.url,r.ua);case 9:n=t.sent;case 10:if(i=_$proxyUtils_37.ProxyUtils.parse(n),a){t.next=15;break}return t.next=14,_$proxyUtils_37.ProxyUtils.process(i,r.process||[],o);case 14:i=t.sent;case 15:y[e]=i,v++,___app_40.default.info("\u2705 \u5b50\u8ba2\u9605\uff1a".concat(r.name,"\u52a0\u8f7d\u6210\u529f\uff0c\u8fdb\u5ea6--").concat(100*(v/d.length).toFixed(1),"% ")),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(1),v++,___app_40.default.error("\u274c \u5904\u7406\u7ec4\u5408\u8ba2\u9605\u4e2d\u7684\u5b50\u8ba2\u9605: ".concat(r.name,"\u65f6\u51fa\u73b0\u9519\u8bef\uff1a").concat(t.t0,"\uff0c\u8be5\u8ba2\u9605\u5df2\u88ab\u8df3\u8fc7\uff01\u8fdb\u5ea6--").concat(100*(v/d.length).toFixed(1),"%"));case 24:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}()));case 48:if(m=Array.prototype.concat.apply([],d.map((function(t){return y[t]}))),a){t.next=53;break}return t.next=52,_$proxyUtils_37.ProxyUtils.process(m,h.process||[],o);case 52:m=t.sent;case 53:if(0!==m.length){t.next=55;break}throw new Error("\u7ec4\u5408\u8ba2\u9605\u4e2d\u4e0d\u542b\u6709\u6548\u8282\u70b9\uff01");case 55:g={},w=___createForOfIteratorHelper_40(m),t.prev=57,w.s();case 59:if((b=w.n()).done){t.next=67;break}if(E=b.value,!g[E.name]){t.next=64;break}return ___app_40.default.notify("\ud83c\udf0d \u300e \ud835\udc7a\ud835\udc96\ud835\udc83-\ud835\udc7a\ud835\udc95\ud835\udc90\ud835\udc93\ud835\udc86 \u300f","\u26a0\ufe0f \u8ba2\u9605\u5305\u542b\u91cd\u590d\u8282\u70b9\uff01","\u8bf7\u4ed4\u7ec6\u68c0\u6d4b\u914d\u7f6e\uff01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"}),t.abrupt("break",67);case 64:g[E.name]=!0;case 65:t.next=59;break;case 67:t.next=72;break;case 69:t.prev=69,t.t1=t.catch(57),w.e(t.t1);case 72:return t.prev=72,w.f(),t.finish(72);case 75:return t.abrupt("return",_$proxyUtils_37.ProxyUtils.produce(m,o));case 78:if("rule"!==r){t.next=104;break}S=n,O=[],A=0;case 82:if(!(A<S.urls.length)){t.next=100;break}return x=S.urls[A],___app_40.default.info("\u6b63\u5728\u5904\u7406URL\uff1a".concat(x,"\uff0c\u8fdb\u5ea6--").concat(100*((A+1)/S.urls.length).toFixed(1),"% ")),t.prev=85,t.next=88,(0,___download_40.default)(x);case 88:L=t.sent,T=L.body,R=_$ruleUtils_38.RuleUtils.parse(T),O=O.concat(R),t.next=97;break;case 94:t.prev=94,t.t2=t.catch(85),___app_40.default.error("\u5904\u7406\u5206\u6d41\u8ba2\u9605\u4e2d\u7684URL: ".concat(x,"\u65f6\u51fa\u73b0\u9519\u8bef\uff1a").concat(t.t2,"! \u8be5\u8ba2\u9605\u5df2\u88ab\u8df3\u8fc7\u3002"));case 97:A++,t.next=82;break;case 100:return t.next=102,_$ruleUtils_38.RuleUtils.process(O,[{type:"Remove Duplicate Filter"}]);case 102:return O=t.sent,t.abrupt("return",_$ruleUtils_38.RuleUtils.produce(O,o));case 104:case"end":return t.stop()}}),t,null,[[19,31,34,37],[57,69,72,75],[85,94]])})))).apply(this,arguments)}var _$subscriptions_45={};function ___typeof_45(t){return(___typeof_45="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_$subscriptions_45,"__esModule",{value:!0}),_$subscriptions_45.default=function(t){___app_45.default.read(_$constants_42.SUBS_KEY)||___app_45.default.write({},_$constants_42.SUBS_KEY),t.get("/download/:name",downloadSubscription),t.route("/api/sub/:name").get(getSubscription).patch(updateSubscription).delete(deleteSubscription),t.route("/api/subs").get(getAllSubscriptions).post(createSubscription)},_$subscriptions_45.getFlowHeaders=getFlowHeaders,_$subscriptions_45.getPlatformFromHeaders=getPlatformFromHeaders;var obj,___app_45=(obj=_$app_36)&&obj.__esModule?obj:{default:obj};function ___regeneratorRuntime_45(){___regeneratorRuntime_45=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_45(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __ownKeys_45(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_45(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?__ownKeys_45(Object(r),!0).forEach((function(e){___defineProperty_45(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__ownKeys_45(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ___defineProperty_45(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function __asyncGeneratorStep_45(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function ___asyncToGenerator_45(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_45(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_45(a,n,o,i,s,"throw",t)}i(void 0)}))}}function downloadSubscription(t,e){return _downloadSubscription.apply(this,arguments)}function _downloadSubscription(){return(_downloadSubscription=___asyncToGenerator_45(___regeneratorRuntime_45().mark((function t(e,r){var n,o,a,i,s,c,u,p;return ___regeneratorRuntime_45().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.params.name,n=decodeURIComponent(n),o=e.query||"false",a=o.raw,i=e.query.target||getPlatformFromHeaders(e.headers)||"JSON",___app_45.default.info("\u6b63\u5728\u4e0b\u8f7d\u8ba2\u9605\uff1a".concat(n)),s=___app_45.default.read(_$constants_42.SUBS_KEY),!(c=s[n])){t.next=27;break}return t.prev=8,t.next=11,(0,_$artifacts_40.produceArtifact)({type:"subscription",item:c,platform:i,noProcessor:a});case 11:if(u=t.sent,"local"===c.source){t.next=17;break}return t.next=15,getFlowHeaders(c.url);case 15:(p=t.sent)&&r.set("subscription-userinfo",p);case 17:"JSON"===i?r.set("Content-Type","application/json;charset=utf-8").send(u):r.send(u),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(8),___app_45.default.notify("\ud83c\udf0d \u300e \ud835\udc7a\ud835\udc96\ud835\udc83-\ud835\udc7a\ud835\udc95\ud835\udc90\ud835\udc93\ud835\udc86 \u300f \u4e0b\u8f7d\u8ba2\u9605\u5931\u8d25","\u274c \u65e0\u6cd5\u4e0b\u8f7d\u8ba2\u9605\uff1a".concat(n,"\uff01"),"\ud83e\udd14 \u539f\u56e0\uff1a".concat(JSON.stringify(t.t0))),___app_45.default.error(JSON.stringify(t.t0)),r.status(500).json({status:"failed",message:t.t0});case 25:t.next=29;break;case 27:___app_45.default.notify("\ud83c\udf0d \u300e \ud835\udc7a\ud835\udc96\ud835\udc83-\ud835\udc7a\ud835\udc95\ud835\udc90\ud835\udc93\ud835\udc86 \u300f \u4e0b\u8f7d\u8ba2\u9605\u5931\u8d25","\u274c \u672a\u627e\u5230\u8ba2\u9605\uff1a".concat(n,"\uff01")),r.status(404).json({status:"failed"});case 29:case"end":return t.stop()}}),t,null,[[8,20]])})))).apply(this,arguments)}function createSubscription(t,e){var r=t.body,n=___app_45.default.read(_$constants_42.SUBS_KEY);___app_45.default.info("\u6b63\u5728\u521b\u5efa\u8ba2\u9605\uff1a ".concat(r.name)),n[r.name]&&e.status(500).json({status:"failed",message:"\u8ba2\u9605".concat(r.name,"\u5df2\u5b58\u5728\uff01")}),n[r.name]=r,___app_45.default.write(n,_$constants_42.SUBS_KEY),e.status(201).json({status:"success",data:r})}function getSubscription(t,e){var r=t.params.name;r=decodeURIComponent(r);var n=___app_45.default.read(_$constants_42.SUBS_KEY)[r];n?e.json({status:"success",data:n}):e.status(404).json({status:"failed",message:"\u672a\u627e\u5230\u8ba2\u9605\uff1a".concat(r,"!")})}function updateSubscription(t,e){var r=t.params.name;r=decodeURIComponent(r);var n=t.body,o=___app_45.default.read(_$constants_42.SUBS_KEY);if(o[r]){var a=___objectSpread_45(___objectSpread_45({},o[r]),n);if(___app_45.default.info("\u6b63\u5728\u66f4\u65b0\u8ba2\u9605\uff1a ".concat(r)),r!==n.name){for(var i=___app_45.default.read(_$constants_42.COLLECTIONS_KEY),s=0,c=Object.keys(i);s<c.length;s++){var u=c[s],p=i[u].subscriptions.indexOf(r);-1!==p&&(i[u].subscriptions[p]=n.name)}delete o[r],o[n.name]=a}else o[r]=a;___app_45.default.write(o,_$constants_42.SUBS_KEY),e.json({status:"success",data:a})}else e.status(500).json({status:"failed",message:"\u8ba2\u9605".concat(r,"\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u66f4\u65b0\uff01")})}function deleteSubscription(t,e){var r=t.params.name;r=decodeURIComponent(r),___app_45.default.info("\u5220\u9664\u8ba2\u9605\uff1a".concat(r,"..."));var n=___app_45.default.read(_$constants_42.SUBS_KEY);delete n[r],___app_45.default.write(n,_$constants_42.SUBS_KEY);for(var o=___app_45.default.read(_$constants_42.COLLECTIONS_KEY),a=0,i=Object.keys(o);a<i.length;a++){var s=i[a];o[s].subscriptions=o[s].subscriptions.filter((function(t){return t!==r}))}___app_45.default.write(o,_$constants_42.COLLECTIONS_KEY),e.json({status:"success"})}function getAllSubscriptions(t,e){var r=___app_45.default.read(_$constants_42.SUBS_KEY);e.json({status:"success",data:r})}function getFlowHeaders(t){return _getFlowHeaders.apply(this,arguments)}function _getFlowHeaders(){return(_getFlowHeaders=___asyncToGenerator_45(___regeneratorRuntime_45().mark((function t(e){var r,n,o;return ___regeneratorRuntime_45().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,___app_45.default.http.get({url:e,headers:{"User-Agent":"Quantumult%20X/1.0.30 (iPhone14,2; iOS 15.6)"}});case 2:return r=t.sent,n=r.headers,o=Object.keys(n).filter((function(t){return/SUBSCRIPTION-USERINFO/i.test(t)}))[0],t.abrupt("return",n[o]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function getPlatformFromHeaders(t){for(var e="",r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];if(/USER-AGENT/i.test(o)){e=t[o];break}}return-1!==e.indexOf("Quantumult%20X")?"QX":-1!==e.indexOf("Surge")?"Surge":-1!==e.indexOf("Decar")||-1!==e.indexOf("Loon")?"Loon":-1!==e.indexOf("Stash")||-1!==e.indexOf("Shadowrocket")?"Clash":null}var _$collections_41={};function ___typeof_41(t){return(___typeof_41="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_$collections_41,"__esModule",{value:!0}),_$collections_41.default=function(t){___app_41.default.read(_$constants_42.COLLECTIONS_KEY)||___app_41.default.write({},_$constants_42.COLLECTIONS_KEY),t.get("/download/collection/:name",downloadCollection),t.route("/api/collection/:name").get(getCollection).patch(updateCollection).delete(deleteCollection),t.route("/api/collections").get(getAllCollections).post(createCollection)};var __obj_41,___app_41=(__obj_41=_$app_36)&&__obj_41.__esModule?__obj_41:{default:__obj_41};function ___regeneratorRuntime_41(){___regeneratorRuntime_41=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_41(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __ownKeys_41(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_41(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?__ownKeys_41(Object(r),!0).forEach((function(e){___defineProperty_41(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__ownKeys_41(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ___defineProperty_41(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function __asyncGeneratorStep_41(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function downloadCollection(t,e){return _downloadCollection.apply(this,arguments)}function _downloadCollection(){var t;return t=___regeneratorRuntime_41().mark((function t(e,r){var n,o,a,i,s,c,u,p,f,l,_;return ___regeneratorRuntime_41().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.params.name,n=decodeURIComponent(n),o=e.query||"false",a=o.raw,i=e.query.target||(0,_$subscriptions_45.getPlatformFromHeaders)(e.headers)||"JSON",s=___app_41.default.read(_$constants_42.COLLECTIONS_KEY),c=s[n],___app_41.default.info("\u6b63\u5728\u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\uff1a".concat(n)),u=___app_41.default.read(_$constants_42.SUBS_KEY),!((p=c.subscriptions).length>0)){t.next=16;break}if("local"===(f=u[p[0]]).source){t.next=16;break}return t.next=14,(0,_$subscriptions_45.getFlowHeaders)(f.url);case 14:(l=t.sent)&&r.set("subscription-userinfo",l);case 16:if(!c){t.next=30;break}return t.prev=17,t.next=20,(0,_$artifacts_40.produceArtifact)({type:"collection",item:c,platform:i,noProcessor:a});case 20:_=t.sent,"JSON"===i?r.set("Content-Type","application/json;charset=utf-8").send(_):r.send(_),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(17),___app_41.default.notify("\ud83c\udf0d \u300e \ud835\udc7a\ud835\udc96\ud835\udc83-\ud835\udc7a\ud835\udc95\ud835\udc90\ud835\udc93\ud835\udc86 \u300f \u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\u5931\u8d25","\u274c \u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\u9519\u8bef\uff1a".concat(n,"\uff01"),"\ud83e\udd14 \u539f\u56e0\uff1a".concat(t.t0)),r.status(500).json({status:"failed",message:t.t0});case 28:t.next=32;break;case 30:___app_41.default.notify("\ud83c\udf0d \u300e \ud835\udc7a\ud835\udc96\ud835\udc83-\ud835\udc7a\ud835\udc95\ud835\udc90\ud835\udc93\ud835\udc86 \u300f \u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\u5931\u8d25","\u274c \u672a\u627e\u5230\u7ec4\u5408\u8ba2\u9605\uff1a".concat(n,"\uff01")),r.status(404).json({status:"failed"});case 32:case"end":return t.stop()}}),t,null,[[17,24]])})),(_downloadCollection=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_41(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_41(a,n,o,i,s,"throw",t)}i(void 0)}))}).apply(this,arguments)}function createCollection(t,e){var r=t.body;___app_41.default.info("\u6b63\u5728\u521b\u5efa\u7ec4\u5408\u8ba2\u9605\uff1a".concat(r.name));var n=___app_41.default.read(_$constants_42.COLLECTIONS_KEY);n[r.name]&&e.status(500).json({status:"failed",message:"\u8ba2\u9605\u96c6".concat(r.name,"\u5df2\u5b58\u5728\uff01")}),n[r.name]=r,___app_41.default.write(n,_$constants_42.COLLECTIONS_KEY),e.status(201).json({status:"success",data:r})}function getCollection(t,e){var r=t.params.name;r=decodeURIComponent(r);var n=___app_41.default.read(_$constants_42.COLLECTIONS_KEY)[r];n?e.json({status:"success",data:n}):e.status(404).json({status:"failed",message:"\u672a\u627e\u5230\u8ba2\u9605\u96c6\uff1a".concat(r,"!")})}function updateCollection(t,e){var r=t.params.name;r=decodeURIComponent(r);var n=t.body,o=___app_41.default.read(_$constants_42.COLLECTIONS_KEY);if(o[r]){var a=___objectSpread_41(___objectSpread_41({},o[r]),n);___app_41.default.info("\u6b63\u5728\u66f4\u65b0\u7ec4\u5408\u8ba2\u9605\uff1a".concat(r,"...")),delete o[r],o[n.name||r]=a,___app_41.default.write(o,_$constants_42.COLLECTIONS_KEY),e.json({status:"success",data:a})}else e.status(500).json({status:"failed",message:"\u8ba2\u9605\u96c6".concat(r,"\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u66f4\u65b0\uff01")})}function deleteCollection(t,e){var r=t.params.name;r=decodeURIComponent(r),___app_41.default.info("\u6b63\u5728\u5220\u9664\u7ec4\u5408\u8ba2\u9605\uff1a".concat(r));var n=___app_41.default.read(_$constants_42.COLLECTIONS_KEY);delete n[r],___app_41.default.write(n,_$constants_42.COLLECTIONS_KEY),e.json({status:"success"})}function getAllCollections(t,e){var r=___app_41.default.read(_$constants_42.COLLECTIONS_KEY);e.json({status:"success",data:r})}var _$settings_44={};Object.defineProperty(_$settings_44,"__esModule",{value:!0}),_$settings_44.default=function(t){___app_44.default.read(_$constants_42.SETTINGS_KEY)||___app_44.default.write({},_$constants_42.SETTINGS_KEY),t.route("/api/settings").get(getSettings).patch(updateSettings)};var __obj_44,___app_44=(__obj_44=_$app_36)&&__obj_44.__esModule?__obj_44:{default:__obj_44};function __ownKeys_44(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_44(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?__ownKeys_44(Object(r),!0).forEach((function(e){___defineProperty_44(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__ownKeys_44(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ___defineProperty_44(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function getSettings(t,e){var r=___app_44.default.read(_$constants_42.SETTINGS_KEY);e.json(r)}function updateSettings(t,e){var r=t.body,n=___app_44.default.read(_$constants_42.SETTINGS_KEY);___app_44.default.write(___objectSpread_44(___objectSpread_44({},n),r),_$constants_42.SETTINGS_KEY),e.json({status:"success"})}var _$restful_43={};function ___typeof_43(t){return(___typeof_43="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(_$restful_43,"__esModule",{value:!0}),_$restful_43.default=function(){var t,e,r=(0,_express.default)({substore:___app_43.default});(0,_collections.default)(r),(0,___subscriptions_43.default)(r),(0,_settings.default)(r),(0,___artifacts_43.default)(r),r.get("/api/utils/IP_API/:server",_ipApi.default),r.get("/api/utils/env",getEnv),r.get("/api/utils/backup",gistBackup),r.get("/",(e=___asyncToGenerator_43(___regeneratorRuntime_43().mark((function t(e,r){return ___regeneratorRuntime_43().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.set("location","https://sub-store.vercel.app/").status(302).end();case 1:case"end":return t.stop()}}),t)}))),function(t,r){return e.apply(this,arguments)})),(0,_$openApi_52.ENV)().isQX&&r.options("/",(t=___asyncToGenerator_43(___regeneratorRuntime_43().mark((function t(e,r){return ___regeneratorRuntime_43().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.status(200).end();case 1:case"end":return t.stop()}}),t)}))),function(e,r){return t.apply(this,arguments)})),r.all("/",(function(t,e){e.send("Hello from sub-store, made with \u2764\ufe0f by Peng-YM")})),r.start()};var _express=___interopRequireDefault_43(_$express_51),_ipApi=___interopRequireDefault_43(_$ipApi_49),___gist_43=___interopRequireDefault_43(_$gist_48),___app_43=___interopRequireDefault_43(_$app_36),___subscriptions_43=___interopRequireDefault_43(_$subscriptions_45),_collections=___interopRequireDefault_43(_$collections_41),___artifacts_43=___interopRequireDefault_43(_$artifacts_40),_settings=___interopRequireDefault_43(_$settings_44);function ___interopRequireDefault_43(t){return t&&t.__esModule?t:{default:t}}function ___regeneratorRuntime_43(){___regeneratorRuntime_43=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(x){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var p={};function f(){}function l(){}function _(){}var h={};s(h,o,(function(){return this}));var d=Object.getPrototypeOf,y=d&&d(d(O([])));y&&y!==e&&r.call(y,o)&&(h=y);var v=_.prototype=f.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,s){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==___typeof_43(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return l.prototype=_,s(v,"constructor",_),s(_,"constructor",l),l.displayName=s(_,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(v),s(v,i,"Generator"),s(v,o,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function __asyncGeneratorStep_43(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,o)}function ___asyncToGenerator_43(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){__asyncGeneratorStep_43(a,n,o,i,s,"next",t)}function s(t){__asyncGeneratorStep_43(a,n,o,i,s,"throw",t)}i(void 0)}))}}function getEnv(t,e){var r=(0,_$openApi_52.ENV)(),n="Node";r.isNode&&(n="Node"),r.isQX&&(n="QX"),r.isLoon&&(n="Loon"),r.isSurge&&(n="Surge"),e.json({backend:n})}function gistBackup(t,e){return _gistBackup.apply(this,arguments)}function _gistBackup(){return(_gistBackup=___asyncToGenerator_43(___regeneratorRuntime_43().mark((function t(e,r){var n,o,a,i,s,c,u;return ___regeneratorRuntime_43().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.query.action,o=___app_43.default.read(_$constants_42.SETTINGS_KEY),a=o.gistToken){t.next=6;break}r.status(500).json({status:"failed",message:"\u672a\u627e\u5230Gist\u5907\u4efdToken!"}),t.next=35;break;case 6:i=new ___gist_43.default({token:a,key:_$constants_42.GIST_BACKUP_KEY}),t.prev=7,c=___app_43.default.read(_$constants_42.SETTINGS_KEY),t.t0=n,t.next="upload"===t.t0?12:"download"===t.t0?20:27;break;case 12:return c.syncTime=(new Date).getTime(),___app_43.default.write(c,_$constants_42.SETTINGS_KEY),s=___app_43.default.read("#sub-store"),___app_43.default.env.isNode&&(s=JSON.stringify(___app_43.default.cache,null,"  ")),___app_43.default.info("\u4e0a\u4f20\u5907\u4efd\u4e2d..."),t.next=19,i.upload((p={},f=_$constants_42.GIST_BACKUP_FILE_NAME,l={content:s},f in p?Object.defineProperty(p,f,{value:l,enumerable:!0,configurable:!0,writable:!0}):p[f]=l,p));case 19:return t.abrupt("break",27);case 20:return ___app_43.default.info("\u8fd8\u539f\u5907\u4efd\u4e2d..."),t.next=23,i.download(_$constants_42.GIST_BACKUP_FILE_NAME);case 23:return s=t.sent,___app_43.default.write(s,"#sub-store"),___app_43.default.env.isNode&&(s=JSON.parse(s),Object.keys(s).forEach((function(t){___app_43.default.write(s[t],t)}))),t.abrupt("break",27);case 27:r.json({status:"success"}),t.next=35;break;case 30:t.prev=30,t.t1=t.catch(7),u="".concat("upload"===n?"\u4e0a\u4f20":"\u4e0b\u8f7d","\u5907\u4efd\u5931\u8d25\uff01").concat(t.t1),___app_43.default.error(u),r.status(500).json({status:"failed",message:u});case 35:case"end":return t.stop()}var p,f,l}),t,null,[[7,30]])})))).apply(this,arguments)}var _$main_39={},__obj_39,_restful=(__obj_39=_$restful_43)&&__obj_39.__esModule?__obj_39:{default:__obj_39};console.log("\n\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\n            \ud835\udc7a\ud835\udc96\ud835\udc83-\ud835\udc7a\ud835\udc95\ud835\udc90\ud835\udc93\ud835\udc86 \xa9 \ud835\udc77\ud835\udc86\ud835\udc8f\ud835\udc88-\ud835\udc80\ud835\udc74\n\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\n"),(0,_restful.default)()}();